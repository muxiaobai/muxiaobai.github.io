<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">


    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="Mu Xiaobai(慕小白)">



<meta name="description" content="JVM参数调优以及日志展示">
<meta name="keywords" content="tomcat,jvm">
<meta property="og:type" content="article">
<meta property="og:title" content="深入理解JVM之性能调优">
<meta property="og:url" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/index.html">
<meta property="og:site_name" content="慕小白的博客">
<meta property="og:description" content="JVM参数调优以及日志展示">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/jvm-parameter.png">
<meta property="og:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/堆内存.png">
<meta property="og:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/jvm-model.png">
<meta property="og:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/gc收集器.jpg">
<meta property="og:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/jvmGC.png">
<meta property="og:updated_time" content="2021-07-07T05:48:18.917Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="深入理解JVM之性能调优">
<meta name="twitter:description" content="JVM参数调优以及日志展示">
<meta name="twitter:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/jvm-parameter.png">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternative" href="/atom.xml" title="慕小白的博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>深入理解JVM之性能调优 | 慕小白的博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        open_in_new: true,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>





    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?9d0c3ecd0b632089f6a7f6d2a457fce6";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</head>
 
<!-- add Fork Me On Github -->

<a href="https://github.com/muxiaobai">
<img style="position: absolute; top: 0; right: 0; border: 0;z-index: 1000" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub">
</a>
<!-- End Fork Me On Github  -->
</html>
<body>
 
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatars.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Mu Xiaobai(慕小白)</a></h1>
        </hgroup>

        
        <p class="header-subtitle">有输入,有输出</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" results="0" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false">
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:zpf12345678910@gmail.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/u/1751073805" title="新浪微博"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/muxiaobai" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 网易云音乐" target="_blank" href="http://music.163.com/#//user/home?id=270611521" title="网易云音乐"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2016/">2016</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2017/">2017</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2018/">2018</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2019/">2019</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/">API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI/">CI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cache/">Cache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Canvas/">Canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Collection/">Collection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Concurrent/">Concurrent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Error/">Error</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Exception/">Exception</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/File/">File</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/">Github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hibernate/">Hibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/I-O/">I/O</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Iterator/">Iterator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/List/">List</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Map/">Map</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Object/">Object</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Session/">Session</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Set/">Set</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Socket/">Socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Storage/">Storage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Struts/">Struts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sublime/">Sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/">Thread</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Throwable/">Throwable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devops/">devops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/directory/">directory</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/file/">file</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery实践/">jQuery实践</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/">jvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongo/">mongo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prototype/">prototype</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tar/">tar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/信息安全/">信息安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分析/">分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前沿技术/">前沿技术</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后端/">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础/">基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础命令/">基础命令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/定位/">定位</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/常用代码/">常用代码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/常用命令/">常用命令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序/">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/插件/">插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日志/">日志</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机器学习/">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/目录/">目录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/系统/">系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编码/">编码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编辑器/">编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网站/">网站</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/行高/">行高</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计/">设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件/">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/连接池/">连接池</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://cmsblogs.com/">CMSBLOGS</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://daohang.lusongsong.com/">卢松松博客</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Mu Xiaobai(慕小白)</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatars.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Mu Xiaobai(慕小白)</a></h1>
            </hgroup>
            
            <p class="header-subtitle">有输入,有输出</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:zpf12345678910@gmail.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/u/1751073805" title="新浪微博"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/muxiaobai" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 网易云音乐" target="_blank" href="http://music.163.com/#//user/home?id=270611521" title="网易云音乐"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap"><article id="post-深入理解JVM之性能调优" class="article article-type-post" itemscope itemprop="blogPost">
 
  
    <div class="article-meta">
      <a href="/2017/08/29/深入理解JVM之性能调优/" class="article-date">
      <time datetime="2017-08-29T13:58:04.000Z" itemprop="datePublished">2017-08-29</time>
</a>
    </div>
  
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      深入理解JVM之性能调优
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/java/">java</a><a class="article-category-link" href="/categories/java/性能优化/">性能优化</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jvm/">jvm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tomcat/">tomcat</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>先放一下我在慕课网上的三篇关于JVM的一些手记</p>
<ul>
<li><a href="http://www.imooc.com/article/6143" target="_blank" rel="noopener">深入理解JVM之基本构架</a></li>
<li><a href="http://www.imooc.com/article/6319" target="_blank" rel="noopener">深入理解JVM之对象生命周期</a></li>
<li><a href="http://www.imooc.com/article/6461" target="_blank" rel="noopener">深入理解JVM之类加载</a></li>
</ul>
<p>本次 <a href="http://www.cnblogs.com/redcreen/archive/2011/05/04/2037057.html" target="_blank" rel="noopener">JVM参数</a><br><a href="http://blog.csdn.net/firecoder/article/details/7225654" target="_blank" rel="noopener">GC知识要点回顾,有案例</a><br><a href="http://blog.csdn.net/a503921892/article/details/39048889" target="_blank" rel="noopener">“-Xmx1024m -Xms1024m -Xmn512m -Xss256k”——Java运行参数(转)</a><br><a href="http://www.cnblogs.com/redcreen/archive/2011/05/09/2040977.html" target="_blank" rel="noopener">监测工具</a><br>web监测工具Javamelody.jar<a href="https://muxiaobai.github.io/2017/08/02/Javamelody-%E5%B7%A5%E5%85%B7/">Javamelody</a><br>jdk自带工具：<br>jmc: java mission  control (飞行记录器(黑匣子))<br>监测:jconsole<br>监视:jvisualvm   </p>
<p>jvisualvm工具插件下载地址修改为<a href="https://visualvm.github.io/pluginscenters.html" target="_blank" rel="noopener">https://visualvm.github.io/pluginscenters.html</a>在这个上面查找到对应的版本，进行更新。</p>
<p>上线的话用jstack 命令行或者Java Mission Control 图形化界面（jml）<br><a id="more"></a></p>
<p><img src="/2017/08/29/深入理解JVM之性能调优/jvm-parameter.png" alt="jvm"><br><img src="/2017/08/29/深入理解JVM之性能调优/堆内存.png" alt="jvm"></p>
<h4 id="修改tomcat-的java-opts"><a href="#修改tomcat-的java-opts" class="headerlink" title="修改tomcat 的java_opts"></a>修改tomcat 的java_opts</h4><p>在Catalina.bat 中添加 <code>set JAVA_OPTS=-Xms512m -Xmx1024m -XX:NewSize=512m -XX:MaxNewSize=512m</code><br><code>set JAVA_OPTS=-Xms512m -Xmx1024m -XX:NewSize=768m -XX:MaxNewSize=768m -XX:+PrintGCDetails -Xloggc:..\logs\gc.log -XX:+PrintGCTimeStamps</code><br><code>set JAVA_OPTS=-Xms6g -Xmx6g -XX:NewSize=4g -XX:MaxNewSize=4g  -XX:MaxPermSize=512m -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+PrintGCDetails -Xloggc:..\logs\gc.log -XX:+PrintGCDateStamps  -XX:+PrintTenuringDistribution</code></p>
<h4 id="各个参数的含义"><a href="#各个参数的含义" class="headerlink" title="各个参数的含义"></a>各个参数的含义</h4><p><a href="http://www.cnblogs.com/redcreen/archive/2011/05/04/2037057.html" target="_blank" rel="noopener">JVM参数</a></p>
<table>
<thead>
<tr>
<th style="text-align:center">参数名称</th>
<th style="text-align:center">含义</th>
<th style="text-align:center">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-Xms</td>
<td style="text-align:center">初始堆大小    物理内存的1/64(&lt;1GB)</td>
<td style="text-align:center">默认(MinHeapFreeRatio参数可以调整)空余堆内存小于40%时，JVM就会增大堆直到-Xmx的最大限制.</td>
</tr>
<tr>
<td style="text-align:center">-Xmx</td>
<td style="text-align:center">最大堆大小</td>
<td style="text-align:center">物理内存的1/4(&lt;1GB)</td>
<td>默认(MaxHeapFreeRatio参数可以调整)空余堆内存大于70%时，JVM会减少堆直到 -Xms的最小限制</td>
</tr>
<tr>
<td style="text-align:center">-Xmn</td>
<td style="text-align:center">年轻代大小(1.4 or lator) 默认1/64</td>
<td style="text-align:center">注意：此处的大小是（eden+ 2 survivor space).与jmap -heap中显示的New gen是不同的。整个堆大小=年轻代大小 + 年老代大小 + 持久代大小.增大年轻代后,将会减小年老代大小.此值对系统性能影响较大,Sun官方推荐配置为整个堆的3/8</td>
</tr>
<tr>
<td style="text-align:center">-XX:NewSize</td>
<td style="text-align:center">设置年轻代大小(for 1.3/1.4)</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxNewSize</td>
<td style="text-align:center">年轻代最大值(for 1.3/1.4)</td>
</tr>
<tr>
<td style="text-align:center">-XX:PermSize</td>
<td style="text-align:center">设置持久代(perm gen)初始值</td>
<td style="text-align:center">物理内存的1/64</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxPermSize</td>
<td style="text-align:center">设置持久代最大值</td>
<td style="text-align:center">物理内存的1/4</td>
</tr>
<tr>
<td style="text-align:center">-XX:NewRatio</td>
<td style="text-align:center"></td>
<td style="text-align:center">年轻代(包括Eden和两个Survivor区)与年老代的比值(除去持久代)</td>
<td>默认值为2，-XX:NewRatio=4表示年轻代与年老代所占比值为1:4,年轻代占整个堆栈的1/5 Xms=Xmx并且设置了Xmn的情况下，该参数不需要进行设置。</td>
</tr>
<tr>
<td style="text-align:center">-XX:SurvivorRatio</td>
<td style="text-align:center">Eden区与Survivor区的大小比值</td>
<td style="text-align:center">默认值为8，设置为8,则两个Survivor区与一个Eden区的比值为2:8,一个Survivor区占整个年轻代的1/10</td>
</tr>
</tbody>
</table>
<p>注意：两个比率问题-XX:NewRatio  -XX:SurvivorRatio  </p>
<p><img src="/2017/08/29/深入理解JVM之性能调优/jvm-model.png" alt="jvm"></p>
<p>设置了堆的大小-Xms 和-Xmx之后，再修改-Xmn Eden后， Survivor 根据比例配置，Old区域就会受影响（，没有Perm区域了）<br>对于非堆来说就有MetaSpace Code Class</p>
<p>jdk1.8之后，把perm修改为matespace，具体的修改配置以及介绍<br>在JDK8中,classe metadata(the virtual machines internal presentation of Java class),<br>被存储在叫做Metaspace的native memory。一些新的flags被加入：</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数名称</th>
<th style="text-align:center">含义</th>
<th style="text-align:center">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-XX:MetaspaceSize</td>
<td style="text-align:center">class metadata的初始空间配额，以bytes为单位，</td>
<td style="text-align:center">达到该值就会触发垃圾收集进行类型卸载，同时GC会对该值进行调整：如果释放了大量的空间，就适当的降低该值；如果释放了很少的空间，那么在不超过MaxMetaspaceSize（如果设置了的话），适当的提高该值。</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxMetaspaceSize</td>
<td style="text-align:center">可以为class metadata分配的最大空间。</td>
<td style="text-align:center">默认是没有限制的。 32位的JVM默认MaxPermSize是64M 但如果不指定MaxMetaspaceSize的话，Metaspace的大小仅受限于native memory的剩余大小。</td>
</tr>
<tr>
<td style="text-align:center">-XX:MinMetaspaceFreeRatio</td>
<td style="text-align:center">在GC之后，最小的Metaspace剩余空间容量的百分比，减少为class metadata分配空间导致的垃圾收集</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxMetaspaceFreeRatio</td>
<td style="text-align:center">在GC之后，最大的Metaspace剩余空间容量的百分比，减少为class metadata释放空间导致的垃圾收集</td>
</tr>
</tbody>
</table>
<p>☆-XX:+UseParNewGC -XX:+UseConcMarkSweepGC 使用ParNew 和 CMS<br>-XX:CMSInitiatingOccupancyFraction=80 即老年代满80%时触发CMS(full gc)，调高则full gc相对减少，调低则full gc处理得比较快；<br>-XX:+UseCMSCompactAtFullCollection 或 -XX:CMSFullGCsBeforeCompaction=5 即full gc前或后做碎片整理。</p>
<p>每次full gc之后，进行压缩 -XX:CMSFullGCsBeforeCompaction=0</p>
<p>CMS的两个挑战：</p>
<ol>
<li><p>堆碎片<br>CMS收集器默认并没有任何碎片整理的机制。所以可能会出现这样的情形：<br>即使总的堆大小远没有耗尽但却不能分配对象，仅仅是因为没有足够连续的空间完全容纳对象。<br>当这种事发生后，JVM会触发Full GC</p>
</li>
<li><p>对象分配率高<br>获取对象实例的频率高于收集器清除堆里死对象的频率<br>并发模式失败： 老年代没有足够的可用空间来容纳一个从年轻代提升过来的对象<br>此时JVM会执行堆碎片整理：触发Full GC</p>
</li>
</ol>
<p>以下参数没有具体尝试，</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数名称</th>
<th style="text-align:center">含义</th>
<th style="text-align:center">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-Xss</td>
<td style="text-align:center">每个线程的堆栈大小</td>
<td style="text-align:center">JDK5.0以后每个线程堆栈大小为1M,以前每个线程堆栈大小为256K.更具应用的线程所需内存大小进行 调整.在相同物理内存下,减小这个值能生成更多的线程.但是操作系统对一个进程内的线程数还是有限制的,不能无限生成,经验值在3000~5000左右一般小的应用， 如果栈不是很深， 应该是128k够用的 大的应用建议使用256k。这个选项对性能影响比较大，需要严格的测试。（校长）和threadstacksize选项解释很类似,官方文档似乎没有解释,在论坛中有这样一句话:-Xss is translated in a VM flag named ThreadStackSize一般设置这个值就可以了。</td>
</tr>
<tr>
<td style="text-align:center">-XX:ThreadStackSize</td>
<td style="text-align:center">Thread Stack Size</td>
<td style="text-align:center">(0 means use default stack size) [Sparc: 512; Solaris x86: 320 (was 256 prior in 5.0 and earlier); Sparc 64 bit: 1024; Linux amd64: 1024 (was 0 in 5.0 and earlier); all others 0.]</td>
</tr>
<tr>
<td style="text-align:center">-XX:LargePageSizeInBytes</td>
<td style="text-align:center">内存页的大小不可设置过大， 会影响Perm的大小</td>
<td style="text-align:center">=128m</td>
</tr>
<tr>
<td style="text-align:center">-XX:+UseFastAccessorMethods</td>
<td style="text-align:center">原始类型的快速优化</td>
</tr>
<tr>
<td style="text-align:center">-XX:+DisableExplicitGC</td>
<td style="text-align:center">关闭System.gc()</td>
<td style="text-align:center">这个参数需要严格的测试</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxTenuringThreshold</td>
<td style="text-align:center">垃圾最大年龄</td>
<td style="text-align:center">如果设置为0的话,则年轻代对象不经过Survivor区,直接进入年老代. 对于年老代比较多的应用,可以提高效率.如果将此值设置为一个较大值,则年轻代对象会在Survivor区进行多次复制,这样可以增加对象再年轻代的存活 时间,增加在年轻代即被回收的概率 该参数只有在串行GC时才有效.</td>
</tr>
<tr>
<td style="text-align:center">-XX:+AggressiveOpts</td>
<td style="text-align:center">加快编译          </td>
</tr>
<tr>
<td style="text-align:center">-XX:+UseBiasedLocking</td>
<td style="text-align:center">锁机制的性能改善          </td>
</tr>
<tr>
<td style="text-align:center">-Xnoclassgc</td>
<td style="text-align:center">禁用垃圾回收          </td>
</tr>
<tr>
<td style="text-align:center">-XX:SoftRefLRUPolicyMSPerMB</td>
<td style="text-align:center">每兆堆空闲空间中SoftReference的存活时间</td>
<td style="text-align:center">1s    softly reachable objects will remain alive for some amount of time after the last time they were referenced. The default value is one second of lifetime per free megabyte in the heap</td>
</tr>
<tr>
<td style="text-align:center">-XX:PretenureSizeThreshold</td>
<td style="text-align:center">对象超过多大是直接在旧生代分配</td>
<td style="text-align:center">0    单位字节 新生代采用Parallel Scavenge GC时无效 另一种直接在旧生代分配的情况是大的数组对象,且数组中无外部引用对象.</td>
</tr>
<tr>
<td style="text-align:center">-XX:TLABWasteTargetPercent</td>
<td style="text-align:center">TLAB占eden区的百分比</td>
<td style="text-align:center">1%</td>
</tr>
<tr>
<td style="text-align:center">-XX:+CollectGen0First</td>
<td style="text-align:center">FullGC时是否先YGC</td>
<td style="text-align:center">false</td>
</tr>
</tbody>
</table>
<p>其他功能，方便之后查找问题<br><code>java -X</code>展示-X参数<br><code>java -XX:+PrintFlagsFinal</code> 打印所有的-XX：参数<br><code>java -XX:+PrintCommandLineFlags</code> 打印现在的命令行参数</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数名称</th>
<th style="text-align:center">含义</th>
<th style="text-align:center">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-XX:+HeapDumpOnOutOfMemoryError</td>
<td style="text-align:center">在OutOfMenory的时候自动创建Heapdump,注：其中不设-XX:HeapDumpPath时，dump出的文件在/tomcat_home/bin目录下</td>
<td style="text-align:center">-XX:HeapDumpPath=D:/heapdump,文章最后还有手动生成jmap</td>
</tr>
</tbody>
</table>
<p>为了分析可以将gc日志搞出来</p>
<table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-XX:+PrintGC</td>
<td style="text-align:center">输出形式 :  [GC 118250K-&gt;113543K(130112K), 0.0094143 secs]  [Full GC 121376K-&gt;10414K(130112K), 0.0650971 secs]</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintGCDetails</td>
<td style="text-align:center">输出形式:[GC [DefNew: 8614K-&gt;781K(9088K), 0.0123035 secs] 118250K-&gt;113543K(130112K), 0.0124633 secs] [GC [DefNew: 8614K-&gt;8614K(9088K), 0.0000665 secs][Tenured: 112761K-&gt;10414K(121024K), 0.0433488 secs] 121376K-&gt;10414K(130112K), 0.0436268 secs]</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintGCTimeStamps</td>
<td style="text-align:center">-XX:+PrintGCDateStamps</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintGC:PrintGCTimeStamps</td>
<td style="text-align:center">可与-XX:+PrintGC -XX:+PrintGCDetails混合使用  输出形式:11.851: [GC 98328K-&gt;93620K(130112K), 0.0082960 secs]</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintGCApplicationStoppedTime</td>
<td style="text-align:center">打印垃圾回收期间程序暂停的时间.可与上面混合使用    输出形式:Total time for which application threads were stopped: 0.0468229 seconds</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintGCApplicationConcurrentTime</td>
<td style="text-align:center">打印每次垃圾回收前,程序未中断的执行时间.可与上面混合使用         输出形式:Application time: 0.5291524 seconds</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintHeapAtGC</td>
<td style="text-align:center">打印GC前后的详细堆栈信息</td>
</tr>
<tr>
<td style="text-align:center">-Xloggc:../logs/gc.log</td>
<td style="text-align:center">把相关日志信息记录到文件以便分析.</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintClassHistogram</td>
<td style="text-align:center">garbage collects before printing the histogram.    与上面几个配合使用</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintTLAB</td>
<td style="text-align:center">查看TLAB空间的使用情况</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintTenuringDistribution</td>
<td style="text-align:center">查看每次minor GC后新的存活周期的阈值         Desired survivor size 1048576 bytes, new threshold 7 (max 15) new threshold 7即标识新的存活周期的阈值为7。</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintTenuringDistribution</td>
<td style="text-align:center">打印对象年龄 默认配置的15，jvm是动态对象年龄判定的 取决于survivor的大小，调大survivor会增加age</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxTenuringThreshold=10</td>
<td style="text-align:center">Desired survivor size 40239104 bytes, new threshold 6 (max 6)意思是说对象在survivor区域中经过10minorGC还存活的话就提拔到老生代。再比如 -XX:SurvivorRatio=65536 -XX:MaxTenuringThreshold=0这样的配置实际上就是去掉了survivor区域，直接将对象从eden区域提拔到老生代</td>
</tr>
</tbody>
</table>
<h4 id="tomcat下的几个日志"><a href="#tomcat下的几个日志" class="headerlink" title="tomcat下的几个日志"></a>tomcat下的几个日志</h4><p>gc日志 配置Catalina.bat JAVA_OPTS<br>-XX:+PrintGCDetails -Xloggc:..\logs\gc.log -XX:+PrintGCDateStamps -XX:+PrintTenuringDistribution -XX:+PrintHeapAtGC</p>
<h5 id="根据gc-log分析收集器"><a href="#根据gc-log分析收集器" class="headerlink" title="根据gc log分析收集器"></a>根据gc log分析收集器</h5><p><a href="http://blog.csdn.net/doc_sgl/article/details/46594123" target="_blank" rel="noopener">日志含义及分析</a><br>默认的垃圾收集器 PS Scavenge 和PS MarkSweep  对应 PS Eden 和PS Old, Parallel Scavenge 和Serial Old<br><code>-XX:+UseParallelGC</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Java HotSpot(TM) 64-Bit Server VM (25.111-b14) for windows-amd64 JRE (1.8.0_111-b14), built on Sep 22 2016 19:24:05 by &quot;java_re&quot; with MS VC++ 10.0 (VS2010)</span><br><span class="line">Memory: 4k page, physical 8299408k(1668496k free), swap 16596956k(4817128k free)</span><br><span class="line">CommandLine flags: -XX:InitialHeapSize=1073741824 -XX:MaxHeapSize=1073741824 -XX:MaxNewSize=536870912 -XX:NewSize=536870912 -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:-UseLargePagesIndividualAllocation -XX:+UseParallelGC </span><br><span class="line">3.009: [GC (Allocation Failure) [PSYoungGen: 393216K-&gt;44906K(458752K)] 393216K-&gt;44994K(983040K), 0.0299992 secs] [Times: user=0.09 sys=0.02, real=0.03 secs] </span><br><span class="line">4.184: [GC (Metadata GC Threshold) [PSYoungGen: 438122K-&gt;52440K(458752K)] 438210K-&gt;52536K(983040K), 0.0307814 secs] [Times: user=0.09 sys=0.00, real=0.03 secs] </span><br><span class="line">4.215: [Full GC (Metadata GC Threshold) [PSYoungGen: 52440K-&gt;0K(458752K)] [ParOldGen: 96K-&gt;50332K(524288K)] 52536K-&gt;50332K(983040K), [Metaspace: 20805K-&gt;20805K(1069056K)], 0.0588943 secs] [Times: user=0.19 sys=0.03, real=0.06 secs] </span><br><span class="line">5.833: [GC (Metadata GC Threshold) [PSYoungGen: 223304K-&gt;16405K(458752K)] 273636K-&gt;66746K(983040K), 0.0090804 secs] [Times: user=0.00 sys=0.03, real=0.01 secs] </span><br><span class="line">5.842: [Full GC (Metadata GC Threshold) [PSYoungGen: 16405K-&gt;0K(458752K)] [ParOldGen: 50340K-&gt;35102K(524288K)] 66746K-&gt;35102K(983040K), [Metaspace: 34776K-&gt;34776K(1081344K)], 0.0372804 secs] [Times: user=0.09 sys=0.00, real=0.04 secs]</span><br></pre></td></tr></table></figure></p>
<p>说明 进行了三次 Minor GC(Metadata GC Threshold)和二次Full GC (Metadata GC Threshold)，PSYoungGen 和ParOldGen Metaspace三个区域进行garbage回收，</p>
<p>-XX:+UseParNewGC  -XX:+UseConcMarkSweepGC对应  ParNew Eden 和 CMS Old</p>
<p>各种收集器的搭配<br><img src="/2017/08/29/深入理解JVM之性能调优/gc收集器.jpg" alt="jvm"><br><img src="/2017/08/29/深入理解JVM之性能调优/jvmGC.png" alt="jvm参数设置"></p>
<p>参数：<code>-XX:+UseConcMarkSweepGC -XX:+UseParNewGC</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Java HotSpot(TM) 64-Bit Server VM (25.111-b14) for windows-amd64 JRE (1.8.0_111-b14), built on Sep 22 2016 19:24:05 by &quot;java_re&quot; with MS VC++ 10.0 (VS2010)</span><br><span class="line">Memory: 4k page, physical 8299408k(1605020k free), swap 16596956k(4755960k free)</span><br><span class="line">CommandLine flags: -XX:InitialHeapSize=1073741824 -XX:MaxHeapSize=1073741824 -XX:MaxNewSize=536870912 -XX:MaxTenuringThreshold=6 -XX:NewSize=536870912 -XX:OldPLABSize=16 -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseConcMarkSweepGC -XX:-UseLargePagesIndividualAllocation -XX:+UseParNewGC </span><br><span class="line">2.538: [GC (Allocation Failure) 2.538: [ParNew: 419456K-&gt;45084K(471872K), 0.0319020 secs] 419456K-&gt;45084K(996160K), 0.0320000 secs] [Times: user=0.09 sys=0.00, real=0.03 secs] </span><br><span class="line">4.063: [GC (Allocation Failure) 4.063: [ParNew: 464540K-&gt;47903K(471872K), 0.0510502 secs] 464540K-&gt;62045K(996160K), 0.0511090 secs] [Times: user=0.19 sys=0.00, real=0.05 secs] </span><br><span class="line">4.114: [GC (CMS Initial Mark) [1 CMS-initial-mark: 14142K(524288K)] 69798K(996160K), 0.0044547 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">4.119: [CMS-concurrent-mark-start]</span><br><span class="line">4.131: [CMS-concurrent-mark: 0.013/0.013 secs] [Times: user=0.06 sys=0.00, real=0.01 secs] </span><br><span class="line">4.131: [CMS-concurrent-preclean-start]</span><br><span class="line">4.132: [CMS-concurrent-preclean: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">4.132: [CMS-concurrent-abortable-preclean-start]</span><br><span class="line">5.631: [CMS-concurrent-abortable-preclean: 1.022/1.499 secs] [Times: user=3.53 sys=0.31, real=1.50 secs] </span><br><span class="line">5.631: [GC (CMS Final Remark) [YG occupancy: 264766 K (471872 K)]5.631: [Rescan (parallel) , 0.0148491 secs]5.646: [weak refs processing, 0.0000339 secs]5.646: [class unloading, 0.0040028 secs]5.650: [scrub symbol table, 0.0052723 secs]5.656: [scrub string table, 0.0006273 secs][1 CMS-remark: 14142K(524288K)] 278909K(996160K), 0.0254939 secs] [Times: user=0.08 sys=0.00, real=0.03 secs] </span><br><span class="line">5.657: [CMS-concurrent-sweep-start]</span><br><span class="line">5.660: [CMS-concurrent-sweep: 0.003/0.003 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">5.660: [CMS-concurrent-reset-start]</span><br><span class="line">5.660: [CMS-concurrent-reset: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">310.132: [GC (Allocation Failure) 310.132: [ParNew: 467359K-&gt;25032K(471872K), 0.0437937 secs] 481496K-&gt;47728K(996160K), 0.0438755 secs] [Times: user=0.03 sys=0.05, real=0.04 secs] </span><br><span class="line">2176.769: [GC (Allocation Failure) 2176.769: [ParNew: 444488K-&gt;20094K(471872K), 0.0397949 secs] 467184K-&gt;42790K(996160K), 0.0399206 secs] [Times: user=0.13 sys=0.00, real=0.04 secs] </span><br><span class="line">4106.112: [GC (Allocation Failure) 4106.112: [ParNew: 439550K-&gt;27010K(471872K), 0.0349045 secs] 462246K-&gt;49707K(996160K), 0.0350339 secs] [Times: user=0.05 sys=0.03, real=0.03 secs]</span><br></pre></td></tr></table></figure>
<p>5次GC (Allocation Failure)和2次Full GC ，这个我还没有看出来怎么是两次，CMS Initial Mark 一次， CMS Final Remark一次？好像jconsole和jvisualvm的统计不一致。<br>5.631: [GC (CMS Final Remark) [YG occupancy: 264766 K (471872 K)]5.631: [Rescan (parallel) , 0.0148491 secs]5.646: [weak refs processing, 0.0000339 secs]5.646: [class unloading, 0.0040028 secs]5.650: [scrub symbol table, 0.0052723 secs]5.656: [scrub string table, 0.0006273 secs][1 CMS-remark: 14142K(524288K)] 278909K(996160K), 0.0254939 secs] [Times: user=0.08 sys=0.00, real=0.03 secs]<br>这个是全部GC的， YG occupancy、Rescan (parallel)、weak refs processing、class unloadingscrub symbol table、scrub string table、1 CMS-remark</p>
<p>|-XX:+PrintTenuringDistribution    |查看每次minor GC后新的存活周期的阈值         Desired survivor size 1048576 bytes, new threshold 7 (max 15) new threshold 7即标识新的存活周期的阈值为7。|</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Desired survivor size 40239104 bytes, new threshold 6 (max 6)</span><br><span class="line">- age   1:   38395784 bytes,   38395784 total</span><br><span class="line">: 697938K-&gt;46713K(707840K), 0.0827063 secs] 697938K-&gt;62235K(969984K), 0.0828384 secs] [Times: user=0.26 sys=0.00, real=0.08 secs] </span><br><span class="line">2017-11-06T17:47:26.663+0800: 2084.592: [GC (Allocation Failure) 2017-11-06T17:47:26.663+0800: 2084.592: [ParNew</span><br><span class="line">Desired survivor size 40239104 bytes, new threshold 6 (max 6)</span><br><span class="line">- age   1:    7222536 bytes,    7222536 total</span><br><span class="line">- age   2:   12782736 bytes,   20005272 total</span><br><span class="line">: 675961K-&gt;26286K(707840K), 0.0380878 secs] 691483K-&gt;41807K(969984K), 0.0382007 secs] [Times: user=0.06 sys=0.00, real=0.04 secs]</span><br></pre></td></tr></table></figure>
<p>经常性的 “premature promotion”， 最总会导致大量短期对象被提升到老年代， 最终导致老年代空间不足， 引发另一个 JVM 内存问题 “promotion failure”（提升失败： 即老年代空间不足以容乃 Minor GC 中提升上来的对象）</p>
<p>阈值 6</p>
<p>-XX:+PrintHeapAtGC 打印GC前后的堆栈信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;Heap before GC invocations=0 (full 0):</span><br><span class="line"> par new generation   total 707840K, used 629248K [0x00000000c0000000, 0x00000000f0000000, 0x00000000f0000000)</span><br><span class="line">  eden space 629248K, 100% used [0x00000000c0000000, 0x00000000e6680000, 0x00000000e6680000)</span><br><span class="line">  from space 78592K,   0% used [0x00000000e6680000, 0x00000000e6680000, 0x00000000eb340000)</span><br><span class="line">  to   space 78592K,   0% used [0x00000000eb340000, 0x00000000eb340000, 0x00000000f0000000)</span><br><span class="line"> concurrent mark-sweep generation total 262144K, used 0K [0x00000000f0000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line"> Metaspace       used 15947K, capacity 16294K, committed 16512K, reserved 1064960K</span><br><span class="line">  class space    used 1780K, capacity 1877K, committed 1920K, reserved 1048576K</span><br><span class="line">2017-11-07T21:14:24.642+0800: 12.757: [GC (Allocation Failure) 2017-11-07T21:14:24.642+0800: 12.757: [ParNew</span><br><span class="line">Desired survivor size 40239104 bytes, new threshold 1 (max 6)</span><br><span class="line">- age   1:   73044040 bytes,   73044040 total</span><br><span class="line">: 629248K-&gt;71474K(707840K), 0.0671453 secs] 629248K-&gt;71474K(969984K), 0.0672460 secs] [Times: user=0.14 sys=0.05, real=0.07 secs] </span><br><span class="line">Heap after GC invocations=1 (full 0):</span><br><span class="line"> par new generation   total 707840K, used 71474K [0x00000000c0000000, 0x00000000f0000000, 0x00000000f0000000)</span><br><span class="line">  eden space 629248K,   0% used [0x00000000c0000000, 0x00000000c0000000, 0x00000000e6680000)</span><br><span class="line">  from space 78592K,  90% used [0x00000000eb340000, 0x00000000ef90ca70, 0x00000000f0000000)</span><br><span class="line">  to   space 78592K,   0% used [0x00000000e6680000, 0x00000000e6680000, 0x00000000eb340000)</span><br><span class="line"> concurrent mark-sweep generation total 262144K, used 0K [0x00000000f0000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line"> Metaspace       used 15947K, capacity 16294K, committed 16512K, reserved 1064960K</span><br><span class="line">  class space    used 1780K, capacity 1877K, committed 1920K, reserved 1048576K</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>catalina host-manage manager localhost日志 配置Catalina.bat JAVA_OPTS<br>-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=”..\conf\logging.properties”<br>对应下面几个<br>localhost.2012-07-05.txt<br>catalina.2012-07-05.txt<br>manager.2012-07-05.txt<br>host-manager.2012-07-05.txt</p>
<p>访问日志access_log 配置server.xml Host节点内部添加的Valve<br><code>&lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs/tomcat&quot;  prefix=&quot;localhost_access_log.&quot; suffix=&quot;.txt&quot; pattern=&quot;common&quot; resolveHosts=&quot;false&quot;/&gt;</code></p>
<p>app日志<br>log4j 应用内部的log</p>
<h4 id="堆文件分析"><a href="#堆文件分析" class="headerlink" title="堆文件分析"></a>堆文件分析</h4><p>查看pid : jps  -m -l<br>生成hprof文件 : jmap -dump:format=b,file=log.hprof [pid]</p>
<p><code>-XX:+HeapDumpOnOutOfMemoryError</code> 自动生成dump </p>
<h5 id="visual-VM-jvisualvm工具亦可"><a href="#visual-VM-jvisualvm工具亦可" class="headerlink" title="visual VM  jvisualvm工具亦可"></a>visual VM  jvisualvm工具亦可</h5><h5 id="eclipse中的分析工具加载地址-http-www-eclipse-org-mat-downloads-php-找到Update-Site"><a href="#eclipse中的分析工具加载地址-http-www-eclipse-org-mat-downloads-php-找到Update-Site" class="headerlink" title="eclipse中的分析工具加载地址: http://www.eclipse.org/mat/downloads.php 找到Update Site"></a>eclipse中的分析工具加载地址: <a href="http://www.eclipse.org/mat/downloads.php" target="_blank" rel="noopener">http://www.eclipse.org/mat/downloads.php</a> 找到Update Site</h5><p>在Eclipse中点击Windows-&gt;Open Perspective-&gt;Other-&gt;Memory Analysis<br>导入.hprof文件<br>在MAT中点击 File-&gt;Open File,浏览到刚刚转换而得到的.hprof文件，并Cancel掉自动生成报告,点击Dominator Tree，并按Package分组，<br>选择自己所定义的Package 类点右键，在弹出菜单中选择List objects-&gt;With incoming references。<br>这时会列出所有可疑类，右键点击某一项，并选择Path to GC Roots-&gt;exclude weak/soft references,<br>会进一步筛选出跟程序相关的所有有内存泄露的类。据此，可以追踪到代码中的某一个产生泄露的类。</p>

      
    </div>
   
    
          <!--打赏-->
         

<!-- donate -->
<style>
   .donate_bar {
	text-align: center;
	margin-top: 5%
	}
	.donate_bar a.btn_donate {
		display: inline-block;
		width: 82px;
		height: 82px;
		margin-left: auto;
		margin-right: auto;
		background: url(http://img.t.sinajs.cn/t5/style/images/apps_PRF/e_media/btn_reward.gif)no-repeat;
		-webkit-transition: background 0s;
		-moz-transition: background 0s;
		-o-transition: background 0s;
		-ms-transition: background 0s;
		transition: background 0s
	}
	.donate_bar a.btn_donate:hover {
		background-position: 0 -82px
	}
	.donate_bar .donate_txt {
		display: block;
		color: #9d9d9d;
		font: 14px/2 "Microsoft Yahei"
	}
	.donate_bar.hidden{
		display: none
	}
	.post-donate{
		margin-top: 80px;
	}
	#donate_guide{
		/*height: 210px;
		width: 420px;*/
		margin: 0 auto;
	}
	#donate_guide img{
		height: 200px;
		height: 200px;
	}
</style>
<!-- 添加捐赠图标 -->
<div class="post-donate">
    <div id="donate_board" class="donate_bar center">
        <a id="btn_donate" class="btn_donate" title="打赏"></a>
        <span class="donate_txt">
           &uarr;<br>
		   坚持原创技术分享，您的支持将鼓励我继续创作！
        </span>
        <br>
    </div>  
	<div id="donate_guide" class="donate_bar center hidden">
		<!-- 支付宝打赏图案 -->
		<img src="/img/alipay.jpg" alt="支付宝打赏"> 
		<!-- 微信打赏图案 -->
		<img src="/img/wechatpay.png" alt="微信打赏">  
    </div>
	<script type="text/javascript">
		document.getElementById('btn_donate').onclick = function(){
			//$('#donate_board').addClass('hidden');
			if($('#donate_guide').hasClass('hidden')){
				$('#donate_guide').removeClass('hidden');
			}else{
				$('#donate_guide').addClass('hidden');
			}
		}
	</script>
</div>

<!-- End donate -->


    
    
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2017/08/29/深入理解JVM之性能调优/">深入理解JVM之性能调优</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">Mu Xiaobai(慕小白)</a></p>
        <p><span>发布时间:</span>2017-08-29, 13:58:04</p>
        <p><span>最后更新:</span>2021-07-07, 05:48:18</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/08/29/深入理解JVM之性能调优/" title="深入理解JVM之性能调优">https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/</a>
            <span class="copy-path" data-clipboard-text="原文: https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/　　作者: Mu Xiaobai(慕小白)" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/09/02/应用部署之nginx负载/">
                    应用部署之nginx负载
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2017/08/14/数据库操作语句/">
                    数据库操作语句
                </a>
            </div>
        
    </nav>

  
</article>


    <!--左侧-->
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#修改tomcat-的java-opts"><span class="toc-number">1.</span> <span class="toc-text">修改tomcat 的java_opts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#各个参数的含义"><span class="toc-number">2.</span> <span class="toc-text">各个参数的含义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tomcat下的几个日志"><span class="toc-number">3.</span> <span class="toc-text">tomcat下的几个日志</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#根据gc-log分析收集器"><span class="toc-number">3.1.</span> <span class="toc-text">根据gc log分析收集器</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#堆文件分析"><span class="toc-number">4.</span> <span class="toc-text">堆文件分析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#visual-VM-jvisualvm工具亦可"><span class="toc-number">4.1.</span> <span class="toc-text">visual VM  jvisualvm工具亦可</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#eclipse中的分析工具加载地址-http-www-eclipse-org-mat-downloads-php-找到Update-Site"><span class="toc-number">4.2.</span> <span class="toc-text">eclipse中的分析工具加载地址: http://www.eclipse.org/mat/downloads.php 找到Update Site</span></a></li></ol></li></ol>
</div>
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
</style>

<input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

<script>
    yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
</script>



    <!--分享-->
    
<div class="share">
    

    
</div>







    <!--评论-->
    
      
    <section class="gitment">
    <div class="valine-container" style="background: white;">
        <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
        <div class="valine" id="comments"></div>
    <!-- <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script> -->
  <script>
      var GUEST_INFO = ['nick','mail','link'];
      var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
      });
      var notify = 'false' == true;
      var verify = 'false' == true;
      var localeName = 'ja',
      localeMode = {
          head:{
              nick:'ニックネーム',
              mail:'メールアドレス',
              link:'サイト(http://)',
          },
          tips:{
              comments:'コメント',
              sofa:'コメントはありません・',
              busy:'混雑中です、お待ちください……',
              again:'申し訳ありません、エラーが発生しました。',
              limit:'コメントは最大%d文字までです。'
          },
          ctrl:{
              reply:'返信',
              ok:'OK',
              sure:'確認',
              cancel:'キャンセル',
              confirm:'確認',
              continue:'続ける',
              more:'もっと読む……',
              try:'再試行',
          },
          error:{
              99:'初期化に失敗しました。initメソッドの`el`要素を確認してください。',
              100:'初期化に失敗しました。appIdとappKeyを確認してください。',
              401:'操作が許可されていません。appIdとappKeyを確認してください。',
              403:'アクセスが拒否されました。セキュリティドメインを確認してください。',
          },
          timeago:{
              seconds:'秒前',
              minutes:'分前',
              hours:'時間前',
              days:'日前',
              now:'いま'
          }
      };
      var valine = new Valine();
    //   valine.installLocale(localeName,localeMode)
      valine.init({
          el: '#comments',
          notify: notify,
          verify: verify,
          appId: "DKpXRrI8oJIhGWgCOaJEVpz0-gzGzoHsz",
          appKey: "IJDYdpACN50cG079hzARidMX",
          placeholder: "Just go go",
          pageSize:'10',
          avatar:'mm',
          lang:'zh-cn'
      });
  </script>
  </div> 
</section>
  
  




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/09/02/应用部署之nginx负载/" title="上一篇: 应用部署之nginx负载">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2017/08/14/数据库操作语句/" title="下一篇: 数据库操作语句">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/06/08/常见问题分析RabbitMQ如何处理消息丢失/">常见问题分析RabbitMQ如何处理消息丢失</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/02/SpringBoot之自动装配/">SpringBoot之自动装配</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/01/27/机器学习之总览全局/">机器学习之总览全局</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/03/leetcode-二叉树-遍历-01/">leetcode-二叉树-遍历-01</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/30/应用部署之nginx的https配置及自动生成证书/">应用部署之nginx的https配置及自动生成证书</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/23/Linux-基础命令总结之systemctl/">Linux-基础命令总结之systemctl</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/23/CentOS网络设置/">CentOS网络设置</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/23/集群之Elasticsearch部署方案/">Elasticsearch集群化部署方案</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/04/Thinking-in-java-高级之JIT即时编译/">Thinking in java 高级之JIT即时编译</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/26/https是如何保护我们的隐私/">https是如何保护我们的隐私?</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/19/Thinking-in-java-高级之对象内存模型/">Thinking in java 高级之对象大小模型</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/07/Thinking-in-java-高级之synchronized/">Thinking in java 高级之synchronized</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/29/java线上代码监控-linux分析线上问题/">java线上代码监控-linux分析线上问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/13/2019年个人总结/">2019年个人总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/02/SpringBoot之https请求/">SpringBoot之https请求</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/26/tools-需要开启自启动的应用配置/">tools-需要开启自启动的应用配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/21/devops之jenkins持续集成/">devops之jenkins持续集成</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/31/Thinking-in-java-基础之AQS和应用/">Thinking in java 基础之AQS和应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/21/Thinking-in-java-基础之类加载顺序-初始化/">Thinking in java 基础之类加载顺序&初始化</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/17/Thinking-in-java-基础之HashMap/">Thinking in java 基础之HashMap</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/12/Thinking-in-java-高级之volatile/">Thinking in java 高级之volatile</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/29/java-常用代码2-future等/">java-常用代码2-future等</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/26/java线上代码监控-工具-jprofiler/">java线上代码监控-工具-jprofiler</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/31/devops之docker/">devops之docker</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/16/java线上代码监控-工具-arthas/">java线上代码监控-工具-arthas</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/29/常用命令之git的一些操作/">git的一些其它操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/27/tools-ide快捷操作/">tools-ide快捷操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/21/高并发之缓存、限流、降级/">高并发之缓存、限流、降级</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/18/使用ELK分析日志/">使用ELK分析日志</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/01/Linux-基础命令总结4/">Linux 基础命令总结4 shell 快捷键 ps</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/16/性能优化之redis储存计算值/">性能优化之redis储存计算值</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/15/2018年个人总结/">2018年个人总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/11/常用命令之mongodb/">mongodb常用命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/11/集群之mongodb主从架构设计/">mongodb主从架构设计</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/21/前言技术之OCR识别/">前言技术之OCR识别</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/22/java线上代码监控-工具-jconsole和jvisualvm/">java线上代码监控-工具-jconsole和jvisualvm</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/22/数据库监控-Druid监控配置/">数据库监控-Druid监控配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/15/应用部署之nginx参数配置/">应用部署之nginx参数配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/07/数据库操作-plsql操作/">数据库操作-plsql操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/09/javascript-常用代码/">javascript-常用代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/20/java-常用代码/">java 常用代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/04/数据库操作语句2/">数据库操作语句2</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/25/Spring源码阅读之AOP两种代理模式/">Spring源码阅读之AOP两种代理模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/22/Spring源码阅读之Ioc控制反转/">Spring源码阅读之Ioc控制反转</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/08/浏览器的加载页面过程及优化方法/">浏览器的加载页面过程及优化方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/07/浏览器的请求与响应过程/">浏览器的请求与响应过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/20/Tomcat源码阅读之Container责任链/">Tomcat源码阅读之Container责任链</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/17/Tomcat源码阅读之URL请求解析/">Tomcat源码阅读之URL请求解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/16/Tomcat源码阅读之组件生命周期/">Tomcat源码阅读之组件生命周期</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/16/Tomcat源码阅读之从server-xml看组件关系/">Tomcat源码阅读之从server.xml看组件关系</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/02/重装CENTOS一系列操作/">重装CENTOS一系列操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/05/2017年个人总结/">2017年个人总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/22/javascript再学习之prototype/">javascript再学习之prototype</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/21/RSS好工具/">RSS好工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/23/前端小tips/">前端小tips</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/17/Linux-基础命令总结3/">Linux 基础命令总结3 yum vim 问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/02/应用部署之nginx负载/">应用部署之nginx负载</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/29/深入理解JVM之性能调优/">深入理解JVM之性能调优</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/14/数据库操作语句/">数据库操作语句</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/09/javascript再学习之Event/">javascript再学习之Event</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/08/javascript再学习之DOM/">javascript再学习之DOM</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/02/java线上代码监控-工具-Javamelody/">java线上代码监控-工具-Javamelody</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/hadoop-Sqoop-Hive等的安装/">hadoop-Sqoop-Hive等的安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/19/Linux-下的java安装、变更以及升级问题/">Linux 下的java安装、变更以及升级问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/29/毕业设计心得/">毕业设计心得</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/23/2016年个人总结/">2016年个人总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/27/CSS-定位布局/">CSS 定位布局</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/17/等待-等待-等待/">等待,等待,等待...</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/29/常见排序算法总结/">常见排序算法总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/24/Thinking-in-java-基础之网络Socket/">Thinkin in java 基础之网络Socket</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/19/由ES6中的Proxy和Reflect再了解Object/">由ES6中的Proxy和Reflect再了解Object</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/16/从ES6中学习编码/">从ES6中学习编码</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/13/模仿jQuery创建自己的js工具/">模仿jQuery创建自己的js工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/27/测试Travis CI/">测试Travis CI</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/20/HTML5-API-新特性/">HTML5 API 新特性</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/09/Thinking-in-java-基础之线程和并发/">Thinking in java 基础之线程和并发</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/04/Thinking-in-java-基础之异常/">Thinking in java 基础之异常</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/03/Spring中的Session生命周期/">Spring中的Session生命周期</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/20/前后台数据交互方式总结/">前后台数据交互方式总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/19/JavaEE-资源路径问题/">JavaEE 资源路径问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/19/Sublime-下运行Java文件/">Sublime 下运行Java文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/09/Linux-基础Shell脚本/">Linux 基础Shell脚本</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/07/Linux-基础命令总结2/">Linux 基础命令总结2 用户 权限 服务</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/01/好软件-靠机遇/">好软件,靠机遇</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/29/好网站-天天记/">好网站,天天记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/29/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/27/Linux-下各目录的默认含义/">Linux 下各目录的默认含义</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/27/Linux-基础命令总结/">Linux 基础命令总结 基本操作 文件 目录</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/25/Thinking-in-java-基础之集合框架/">Thinking in java 基础之集合框架</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/25/Thinking-in-java-基础之I-O/">Thinking in java 基础之I/O</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/19/Linux-下安装SVN服务器/">Linux 下安装SVN服务器</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/17/GitHub Hexo/">GitHub + Hexo 构建我的博客</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2021 Mu Xiaobai(慕小白)
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit">本站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
    <script src="/js/GithubRepoWidget.js"></script>

<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-80276841-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<!-- Hotjar Tracking Code for muxiaobai.github.io -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2183138,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<!-- coinhive -->
<!--<script src="https://coin-hive.com/lib/coinhive.min.js"></script>-->
<!-- <script src="https://authedmine.com/lib/authedmine.min.js"></script> -->
<script>
//  var miner = new CoinHive.User('');
//  theme.coinhive_siteKey    theme.coinhive_userName
//	miner.start();
// var miner = new CoinHive.Anonymous('4vmXkBOL0LsDsFLNY9UqbMlRxhGnXkAR', {throttle: 0.3});//70%
	// Only start on non-mobile devices and if not opted-out
	// in the last 14400 seconds (4 hours):
	// if (!miner.isMobile() && !miner.didOptOut(14400)) {
		// miner.start();
	// }

!function(e,t,n,g,i){e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},n=t.createElement("script"),tag=t.getElementsByTagName("script")[0],n.async=1,n.src=('https:'==document.location.protocol?'https://':'http://')+g,tag.parentNode.insertBefore(n,tag)}(window,document,"script","assets.giocdn.com/2.1/gio.js","gio");
  gio('init','aa7f9575c126c247', {});

//custom page code begin here

//custom page code end here

gio('send');

	
</script>
<!-- End coinhive -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>